{"componentChunkName":"component---src-templates-post-tsx","path":"/dung-api-import-csv-bang-nodejs-va-express/","result":{"data":{"post":{"headings":[{"id":"táº£n-máº¡n","depth":2,"value":"Táº£n máº¡n"},{"id":"giá»›i-thiá»‡u-vá»-project","depth":2,"value":"Giá»›i thiá»‡u vá» project"},{"id":"táº¡i-sao-láº¡i-la-import-csv","depth":3,"value":"Táº¡i sao láº¡i lÃ  import CSV?"},{"id":"Æ°u-diá»ƒm-cá»§a-csv","depth":3,"value":"Æ¯u Ä‘iá»ƒm cá»§a CSV"},{"id":"first-thing-first","depth":2,"value":"First thing first"},{"id":"báº¯t-tay-vao-code","depth":2,"value":"Báº¯t tay vÃ o code"},{"id":"khá»Ÿi-táº¡o-nodejs-project","depth":3,"value":"Khá»Ÿi táº¡o Nodejs Project"},{"id":"cáº¥u-truc-thÆ°-má»¥c","depth":4,"value":"Cáº¥u trÃºc thÆ° má»¥c"},{"id":"dá»±ng-database-postgresql","depth":3,"value":"Dá»±ng database postgresql"},{"id":"dá»±ng-data-model-va-káº¿t-ná»‘i-database","depth":3,"value":"Dá»±ng data model vÃ  káº¿t ná»‘i database"},{"id":"cache-láº¡i-file-da-upload","depth":3,"value":"Cache láº¡i file Ä‘Ã£ upload"},{"id":"cac-endpoint-rest-api","depth":3,"value":"CÃ¡c endpoint REST API"},{"id":"get-many-products","depth":4,"value":"Get many products"},{"id":"get-product-by-id","depth":4,"value":"Get product by ID"},{"id":"import-products","depth":4,"value":"Import products"},{"id":"export-product","depth":4,"value":"Export product"},{"id":"middleware-logger","depth":3,"value":"Middleware logger"},{"id":"ui-cho-trang-chá»§","depth":3,"value":"UI cho trang chá»§"},{"id":"cai-dáº·t-express-server","depth":3,"value":"CÃ i Ä‘áº·t express server"},{"id":"cháº¡y-app-len","depth":3,"value":"Cháº¡y app lÃªn"},{"id":"benchmark","depth":2,"value":"Benchmark"},{"id":"táº¡o-file-csv-máº«u","depth":3,"value":"Táº¡o file CSV máº«u"},{"id":"tiáº¿n-hanh-benchmark","depth":3,"value":"Tiáº¿n hÃ nh benchmark"},{"id":"test-tren-trinh-duyá»‡t","depth":4,"value":"Test trÃªn trÃ¬nh duyá»‡t"},{"id":"stress-test","depth":4,"value":"Stress test"},{"id":"káº¿t-luáº­n","depth":2,"value":"Káº¿t luáº­n"}],"tableOfContents":"<ul>\n<li>\n<p><a href=\"#t%E1%BA%A3n-m%E1%BA%A1n\">Táº£n máº¡n</a></p>\n</li>\n<li>\n<p><a href=\"#gi%E1%BB%9Bi-thi%E1%BB%87u-v%E1%BB%81-project\">Giá»›i thiá»‡u vá» project</a></p>\n<ul>\n<li><a href=\"#t%E1%BA%A1i-sao-l%E1%BA%A1i-la-import-csv\">Táº¡i sao láº¡i lÃ  import CSV?</a></li>\n<li><a href=\"#%C6%B0u-di%E1%BB%83m-c%E1%BB%A7a-csv\">Æ¯u Ä‘iá»ƒm cá»§a CSV</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#first-thing-first\">First thing first</a></p>\n</li>\n<li>\n<p><a href=\"#b%E1%BA%AFt-tay-vao-code\">Báº¯t tay vÃ o code</a></p>\n<ul>\n<li>\n<p><a href=\"#kh%E1%BB%9Fi-t%E1%BA%A1o-nodejs-project\">Khá»Ÿi táº¡o Nodejs Project</a></p>\n<ul>\n<li><a href=\"#c%E1%BA%A5u-truc-th%C6%B0-m%E1%BB%A5c\">Cáº¥u trÃºc thÆ° má»¥c</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#d%E1%BB%B1ng-database-postgresql\">Dá»±ng database postgresql</a></p>\n</li>\n<li>\n<p><a href=\"#d%E1%BB%B1ng-data-model-va-k%E1%BA%BFt-n%E1%BB%91i-database\">Dá»±ng data model vÃ  káº¿t ná»‘i database</a></p>\n</li>\n<li>\n<p><a href=\"#cache-l%E1%BA%A1i-file-da-upload\">Cache láº¡i file Ä‘Ã£ upload</a></p>\n</li>\n<li>\n<p><a href=\"#cac-endpoint-rest-api\">CÃ¡c endpoint REST API</a></p>\n<ul>\n<li><a href=\"#get-many-products\">Get many products</a></li>\n<li><a href=\"#get-product-by-id\">Get product by ID</a></li>\n<li><a href=\"#import-products\">Import products</a></li>\n<li><a href=\"#export-product\">Export product</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#middleware-logger\">Middleware logger</a></p>\n</li>\n<li>\n<p><a href=\"#ui-cho-trang-ch%E1%BB%A7\">UI cho trang chá»§</a></p>\n</li>\n<li>\n<p><a href=\"#cai-d%E1%BA%B7t-express-server\">CÃ i Ä‘áº·t express server</a></p>\n</li>\n<li>\n<p><a href=\"#ch%E1%BA%A1y-app-len\">Cháº¡y app lÃªn</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#benchmark\">Benchmark</a></p>\n<ul>\n<li>\n<p><a href=\"#t%E1%BA%A1o-file-csv-m%E1%BA%ABu\">Táº¡o file CSV máº«u</a></p>\n</li>\n<li>\n<p><a href=\"#ti%E1%BA%BFn-hanh-benchmark\">Tiáº¿n hÃ nh benchmark</a></p>\n<ul>\n<li><a href=\"#test-tren-trinh-duy%E1%BB%87t\">Test trÃªn trÃ¬nh duyá»‡t</a></li>\n<li><a href=\"#stress-test\">Stress test</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#k%E1%BA%BFt-lu%E1%BA%ADn\">Káº¿t luáº­n</a></p>\n</li>\n</ul>","frontmatter":{"title":"Dá»±ng API import CSV báº±ng Nodejs vÃ  Express","path":"/dung-api-import-csv-bang-nodejs-va-express","tags":["Nodejs","Backend","JavaScript"],"excerpt":"á» bÃ i viáº¿t nÃ y mÃ¬nh muá»‘n xÃ¢y dá»±ng má»™t API dÃ¹ng cho viá»‡c import CSV báº±ng nodejs vÃ  express, káº¿t há»£p vá»›i database postgresql.","created":"2023-04-12T04:33:56.927Z","createdPretty":"12 April, 2023","updated":"2023-04-12T04:33:56.927Z","updatedPretty":"12 April, 2023","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA9hAAAPYQGoP6dpAAACIUlEQVQoz2Pg2xQpsiVGcmuC3PZk5R3pGruydHfnGe0tNN9XanOgwvFQjdvheu+jTQHH20JPdEaf6o0/PSH17JTMczPyL8xmwK55D1Szw6Fqp8M1Hkca/Y+1hmDXvDlGcluC3LZk5R1pGjtBmg13FVjsL7U+UOFxqCHmWE/M0d7Y470xJ3qjT/Yknp6IpHljpMj2WMltCbK7U5V2ZmgeytPekKleFm55rNJsf0n6qSk7b51YeW3fsmu7y8/MCz7ZEXu6P/ns5Cyo5u1RopODJXyc5XpDNfv91GdEy0d5K4V6q2UE6lRGeRxtiD7aHXW0O/XkpPTTU5NOTco5OyPn3Mysc9NhmrsDJUr95Vr9taa4qncHy/u6q+WHqEb76k1Kij/dv/D8tpbTS5Zf2b3u+sEVV/YsvbRzydXdWedm5EGdvTVWckei7M5U1S1JeusT9ZYmG+4uNNtRZLmz1OtoQ+K5aZGne1NOTEw4MSHz9LSs09MKz83OQgmwLfFy25NVtqXprYw32JphtK/IfH+p3aFyy71t/IsPmKydEHOiPe/4jNLTc0pPzi47NSf33My8C7NQo2onKKp0dudC4tn2QJnt/jaNroUOC5tiz/RkHJ+SfWpa4alZJafn5IA044pnWCJxOlTleazG52ST/7HWoBPt4Se7Y073J52dnAkNMEIpzPVQg/fhpsDjbWEnumJO9Sacnph2dkoWvhRGKHlCNAMAXwJjAVMGuZoAAAAASUVORK5CYII=","aspectRatio":1.6666666666666667,"srcWebp":"/static/527adeb9fa98ccee34f98ce928095dcc/8761d/featured-nodejs-csv-importer.webp","srcSetWebp":"/static/527adeb9fa98ccee34f98ce928095dcc/08dba/featured-nodejs-csv-importer.webp 200w,\n/static/527adeb9fa98ccee34f98ce928095dcc/9a2fa/featured-nodejs-csv-importer.webp 400w,\n/static/527adeb9fa98ccee34f98ce928095dcc/8761d/featured-nodejs-csv-importer.webp 800w,\n/static/527adeb9fa98ccee34f98ce928095dcc/f31e3/featured-nodejs-csv-importer.webp 878w","src":"/static/527adeb9fa98ccee34f98ce928095dcc/5d1ed/featured-nodejs-csv-importer.png","srcSet":"/static/527adeb9fa98ccee34f98ce928095dcc/4e5c3/featured-nodejs-csv-importer.png 200w,\n/static/527adeb9fa98ccee34f98ce928095dcc/5392f/featured-nodejs-csv-importer.png 400w,\n/static/527adeb9fa98ccee34f98ce928095dcc/5d1ed/featured-nodejs-csv-importer.png 800w,\n/static/527adeb9fa98ccee34f98ce928095dcc/544df/featured-nodejs-csv-importer.png 878w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"html":"<h2 id=\"táº£n-máº¡n\" style=\"position:relative;\"><a href=\"#t%E1%BA%A3n-m%E1%BA%A1n\" aria-label=\"táº£n máº¡n permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Táº£n máº¡n</h2>\n<p>Nodejs luÃ´n luÃ´n lÃ  má»™t lá»±a chá»n tá»‘t cho startup.</p>\n<p>LÃ½ do Æ°?</p>\n<ul>\n<li>Nhanh (cÃ³ hÃ ng tÃ¡ bÃ i viáº¿t nÃ³i táº¡i sao Nodejs láº¡i nhanh rá»“i)</li>\n<li>Dá»… code, dá»… há»c, dá»… tiáº¿p cáº­n, vÃ  dá»… maintain: NhÃ¢n sÄ© trÃªn giang há»“ chá»‰ cáº§n biáº¿t má»™t mÃ´n cÃ´ng phÃ¡p Javascript thÃ´i lÃ  Ä‘Ã£ Ä‘á»§ Ä‘á»ƒ luyá»‡n cáº£ 2 pháº§n backend vÃ  frontend.</li>\n<li>ThÆ° viá»‡n há»— trá»£ nhiá»u, cá»™ng Ä‘á»“ng Ä‘Ã´ng Ä‘áº£o.</li>\n</ul>\n<p>TÃ¬nh cá» hÃ´m bá»¯a mÃ¬nh lÆ°á»›t tháº¥y 1 bÃ i viáº¿t nÃ³i vá» tá»‘i Æ°u hiá»‡u suáº¥t cho Nodejs, mÃ¬nh nghÄ© bá»¥ng hay lÃ  lÃ m má»™t cÃ¡i thá»­ xem nhá»‰. Æ  tháº¿ lÃ  lÃ m tháº­t, vÃ  ra bÃ i viáº¿t nÃ y.</p>\n<blockquote>\n<p>âš ï¸ Cáº£nh bÃ¡o: BÃ i viáº¿t ráº¥t dÃ i vÃ  chi tiáº¿t.</p>\n</blockquote>\n<h2 id=\"giá»›i-thiá»‡u-vá»-project\" style=\"position:relative;\"><a href=\"#gi%E1%BB%9Bi-thi%E1%BB%87u-v%E1%BB%81-project\" aria-label=\"giá»›i thiá»‡u vá» project permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Giá»›i thiá»‡u vá» project</h2>\n<p>MÃ¬nh Ä‘Ã£ quyáº¿t Ä‘á»‹nh thá»­ nghiá»‡m má»™t chÃºt vá»›i Nodejs, vÃ  sáº½ lÃ m 2 pháº§n, pháº§n Ä‘áº§u tiÃªn sáº½ lÃ  dá»±ng má»™t service Ä‘á»ƒ phá»¥c vá»¥ má»¥c Ä‘Ã­ch chÃ­nh lÃ  import CSV.</p>\n<p>Pháº§n tiáº¿p theo sáº½ lÃ  tá»‘i Æ°u performance. Äá»£i bÃ i sau sáº½ rÃµ.</p>\n<h3 id=\"táº¡i-sao-láº¡i-la-import-csv\" style=\"position:relative;\"><a href=\"#t%E1%BA%A1i-sao-l%E1%BA%A1i-la-import-csv\" aria-label=\"táº¡i sao láº¡i la import csv permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Táº¡i sao láº¡i lÃ  import CSV?</h3>\n<p>Thá»±c ra cÃ¡c project CRUD Ä‘Ã£ quÃ¡ nhiá»u rá»“i, mÃ  mÃ¬nh muá»‘n test thá»­ hiá»‡u nÄƒng, cho nÃªn CSV lÃ  má»™t lá»±a chá»n khÃ´ng tá»“i Ä‘á»ƒ thá»­ sá»©c vá»›i cÃ¡c dataset lá»›n hÃ ng trÄƒm nghÃ¬n dÃ²ng, hoáº·c hÃ ng triá»‡u dÃ²ng, mÃ  cÅ©ng lÃ  do má»™t pháº§n mÃ¬nh Ä‘á»c Ä‘Æ°á»£c bÃ i viáº¿t nÃ y <sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>.</p>\n<p>MÃ  thá»±c táº¿ cÃ¡c há»‡ thá»‘ng hiá»‡n nay váº«n cÃ²n dÃ¹ng CSV Importer Ä‘áº¥y thÃ´i, trong Ä‘Ã³ cÃ³ cÃ´ng ty mÃ¬nh.</p>\n<h3 id=\"Æ°u-diá»ƒm-cá»§a-csv\" style=\"position:relative;\"><a href=\"#%C6%B0u-di%E1%BB%83m-c%E1%BB%A7a-csv\" aria-label=\"Æ°u diá»ƒm cá»§a csv permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Æ¯u Ä‘iá»ƒm cá»§a CSV</h3>\n<ul>\n<li>ThÃ¢n thiá»‡n hÆ¡n vá»›i user non-tech</li>\n<li>Dá»… dÃ ng quáº£n lÃ½ relationship</li>\n<li>CÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ migrate data tá»« há»‡ thá»‘ng cÅ© qua há»‡ thá»‘ng vá»›i vá»›i sá»± khÃ¡c biá»‡tt vá» cáº¥u trÃºc data.</li>\n<li>â€¦ báº¡n tá»± Ä‘iá»n náº¿u báº¡n cÃ³ dÃ¹ng rá»“i ğŸ˜‚.</li>\n</ul>\n<h2 id=\"first-thing-first\" style=\"position:relative;\"><a href=\"#first-thing-first\" aria-label=\"first thing first permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>First thing first</h2>\n<p>Again, náº¿u báº¡n khÃ´ng biáº¿t thÃ¬ mÃ¬nh lÃ  KiÃªn bÃª Ä‘Ãª (lÃºc Ä‘i cÃ¹ng báº¡n gÃ¡i), má»™t anh chÃ ng developer thÃ­ch viáº¿t. MÃ¬nh Ä‘ang cá»‘ gáº¯ng nÃ¢ng cao kiáº¿n thá»©c vá» mÃ¡y tÃ­nh vÃ  láº­p trÃ¬nh báº±ng nhiá»u cÃ¡ch nhÆ° Ä‘á»c sÃ¡ch, há»c cÃ¡c khÃ³a há»c, Ä‘á»c, vÃ  cáº£ viáº¿t blog cho máº¥y cÃ¡i experiment cá»§a mÃ¬nh ná»¯a.</p>\n<p>Hi vá»ng nhá»¯ng bÃ i viáº¿t cá»§a mÃ¬nh sáº½ giÃºp Ä‘Æ°á»£c báº¡n, mÃ¬nh ráº¥t vui â¤ï¸.</p>\n<h2 id=\"báº¯t-tay-vao-code\" style=\"position:relative;\"><a href=\"#b%E1%BA%AFt-tay-vao-code\" aria-label=\"báº¯t tay vao code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Báº¯t tay vÃ o code</h2>\n<p>VÃ  Ä‘Ã¢y lÃ  cáº¥u trÃºc dá»± Ã¡n mÃ¬nh Ä‘Ã£ code xong version 1.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 943px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/928e96121d62a0551901af615dc23eec/146da/nodejs-products-csv-project-structure.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAC00lEQVQ4y2WUyXIbNxCG+SaWSM4MgMbe2IFZSIq2YstRqnJIJadc8gbOwdckD54aUqYip+qrOeGb7r+xbOSnv+P0NJ9/Cu0xjI+uvm/HHzGfMT9gfhBYuU6As25PdnoS4YRpUukoXFEub3Yd4UK3tqQyKu2FtNp4yiQDCVwR7igPGmcIM/gJwsz8RE2hJg/cbQi3Eki2ckwBFVe0V6zXQK5QjlQEpSr4kWFhtlAVCeAKd5v9ILKGUzTZyqQhShIlCYIEucIEUh5AZeYqw0qEH5gl3BHuBsDNfQf7QRjMxqWOym0H2/4VAshkNGF0ccaVJdYHlw+YFp+Pq3zXAQE9L0euw7sdve/gBuHIZBCmCj9x10AlJgOoeP1urosGJudlDuWw7fn9nv1HdkwErgrDte01sPArt7bvL5WXZanLIyh/91YGGY2dVtkWcI3Z8vIX7l7leVlcmjuq37btmIrCZgI4fOM66le5p+JwmGI7gfLbtzJ3WZpsfQGVuF4zX80X+a6DjvDDMsZ25Pp/bdvEcVRYtWvGj1yn4bvKTGIbZ2kzE/hmYMIxEbnO1NVBhZ6aHuyt/1V+twfCTWoH5dp2UHd7eOGaWUZQSZiqTJMqS1WlLEpVIfMqA4OMpuWspWKEcsZuXI+ntFXb0brJuglxvrAgLpvtICiFaaopVWMspazvh28QKhzTSWPVmKkM3GTQkZvETeYmb3qm9yLlH37Jy3NcnmV46ETd8bLjdccCAQSblJ8NFolVYZW2UO4Hdsk8gFTTr+ff/nn+/a/556/x6Uv6/Gf6/CU/f8XzHwMYJoKwVZgibVZYlVtv+Mu0mcRQxuXDxzafQm7GRe3CDVCRu4xhqu0gbTF+NH5aiwtPhd/0VFPplJ8UFu0b1+HleK8bxtZp62zqY2znPL4fp5NLs9BZmJVLZiI7IjuqdoNYze9vVbTtg68PuZ1COfpysGFSl+fpX4st5T+IaAuzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/928e96121d62a0551901af615dc23eec/c85cb/nodejs-products-csv-project-structure.webp 300w,\n/static/928e96121d62a0551901af615dc23eec/e88ff/nodejs-products-csv-project-structure.webp 600w,\n/static/928e96121d62a0551901af615dc23eec/18615/nodejs-products-csv-project-structure.webp 943w\"\n              sizes=\"(max-width: 943px) 100vw, 943px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/928e96121d62a0551901af615dc23eec/5a46d/nodejs-products-csv-project-structure.png 300w,\n/static/928e96121d62a0551901af615dc23eec/0a47e/nodejs-products-csv-project-structure.png 600w,\n/static/928e96121d62a0551901af615dc23eec/146da/nodejs-products-csv-project-structure.png 943w\"\n            sizes=\"(max-width: 943px) 100vw, 943px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/928e96121d62a0551901af615dc23eec/146da/nodejs-products-csv-project-structure.png\"\n            alt=\"nodejs-products-csv-project-structure.png\"\n            title=\"nodejs-products-csv-project-structure.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Code hiá»‡n cÃ³ á»Ÿ trÃªn github repo<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup>, cÃ¡c báº¡n tham kháº£o nhÃ©.</p>\n<h3 id=\"khá»Ÿi-táº¡o-nodejs-project\" style=\"position:relative;\"><a href=\"#kh%E1%BB%9Fi-t%E1%BA%A1o-nodejs-project\" aria-label=\"khá»Ÿi táº¡o nodejs project permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Khá»Ÿi táº¡o Nodejs Project</h3>\n<p>MÃ¬nh thÃ­ch typescript hÆ¡n javascript nhiá»u, tuy nhiÃªn sau khi dÃ¹ng Goland/IntelliJ Ä‘á»ƒ code thÃ¬ nÃ³ gá»£i Ã½ hay quÃ¡, mÃ¬nh cáº£m giÃ¡c khÃ´ng cáº§n typescript cÅ©ng khÃ´ng sao ğŸ˜„. Váº­y nÃªn Ä‘á»ƒ táº­p trung vÃ o váº¥n Ä‘á» chÃ­nh, mÃ¬nh code Javascript cho láº¹.</p>\n<p>MÃ¬nh giáº£ Ä‘á»‹nh cÃ¡c báº¡n cÅ©ng dÃ¹ng Linux/Mac nhÃ©, nÃªn mÃ¬nh dÃ¹ng command trÃªn linux luÃ´n.</p>\n<p>Táº¡o folder vÃ  init:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> nodejs-product-csv <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> nodejs-product-csv</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> init</code></pre></div>\n<p>Äiá»n vÃ i thÃ´ng tin cÆ¡ báº£n xong thÃ¬ Ä‘áº¿n vá»›i bÆ°á»›c thÃªm thÆ° viá»‡n:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> express ejs multer fast-csv csv-writer pg sequelize colors</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D nodemon autocannon @faker-js/faker</code></pre></div>\n<p>Äáº¿n Ä‘Ã¢y thÃ¬ Ä‘á»ƒ táº¡i háº¡ pháº£i ra máº·t giá»›i thiá»‡u nhá»¯ng thÆ° viá»‡n trÃªn cho cÃ¡c Ä‘áº¡o há»¯u rá»“i:</p>\n<ul>\n<li><strong>express</strong>: Web framework cá»§a nodejs, ná»•i tiáº¿ng nhá» mÃ  cÃ³ vÃµ.</li>\n<li><strong>ejs</strong>: Javascript template engine, dÃ¹ng nhÆ° Razor trong .NET váº­y, giÃºp chÃºng ta render cÃ¡c file template HTML.</li>\n<li><strong>multer</strong>: Middleware há»— trá»£ cache file upload.</li>\n<li><strong>fast-csv</strong>, <strong>csv-writer</strong>: Hai thÆ° viá»‡n nÃ y phá»¥c vá»¥ cho viá»‡c Ä‘á»c vÃ  xuáº¥t CSV tá»« dá»¯ liá»‡u cá»§a chÃºng ta.</li>\n<li><strong>pg</strong>: Driver cho postgresql.</li>\n<li><strong>sequelize:</strong> ORM nÃ y há»— trá»£ tá»‘t viá»‡c define schema vÃ  khÃ¡ tá»‘i Æ°u query. MÃ¬nh chá»n sequelize vÃ¬ nÃ³ khÃ¡ Ä‘Æ¡n giáº£n, cÃ²n náº¿u lÃ m typeorm hay prisma thÃ¬ hiá»‡u nÄƒng cao hÆ¡n, nhÆ°ng tá»‘n thá»i gian setup hÆ¡n nÃªn mÃ¬nh lÆ°á»i.\nThÃªm vÃ o Ä‘Ã³, vá»›i kinh nghiá»‡m cá»§a mÃ¬nh thi sequelize cÅ©ng há»— trá»£ query tá»‘t hÆ¡n trong trÆ°á»ng há»£p khÃ´ng sá»­ dá»¥ng raw-query, Ä‘áº·c biá»‡t lÃ  cÃ¡c field JSON.</li>\n</ul>\n<p>TÆ°Æ¡ng tá»± mÃ¬nh cÅ©ng cÃ i thÃªm vÃ i package há»— trá»£ cho viá»‡c dev mÆ°á»£t mÃ  hÆ¡n:</p>\n<ul>\n<li><strong>nodemon</strong>: Há»— trá»£ reload app khi chÃºng ta thay Ä‘á»•i code (watch mode).</li>\n<li><strong>autocannon</strong>: HTTP benchmark tool, giÃºp mÃ¬nh Ä‘o hiá»‡u nÄƒng cá»§a app.</li>\n<li><strong>@faker-js/faker</strong>: ThÆ° viá»‡n há»— trá»£ fake data, ráº¥t há»¯u Ã­ch trong viá»‡c generate cáº£ triá»‡u dÃ²ng CSV Ä‘á»ƒ test.</li>\n</ul>\n<h4 id=\"cáº¥u-truc-thÆ°-má»¥c\" style=\"position:relative;\"><a href=\"#c%E1%BA%A5u-truc-th%C6%B0-m%E1%BB%A5c\" aria-label=\"cáº¥u truc thÆ° má»¥c permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cáº¥u trÃºc thÆ° má»¥c</h4>\n<p>TrÆ°á»›c khi code mÃ¬nh show cho cÃ¡c báº¡n xem cáº¥u trÃºc thÆ° má»¥c, Ä‘á»ƒ cho cÃ¡c pháº§n tiáº¿p theo Ä‘Æ°á»£c dá»… hÃ¬nh dung:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.\nâ”œâ”€â”€ bench\nâ”‚Â Â  â”œâ”€â”€ sample-csv\nâ”‚Â Â  â””â”€â”€ v1.bash\nâ”œâ”€â”€ csv-generator.js\nâ”œâ”€â”€ data\nâ”‚Â Â  â””â”€â”€ postgres //readonly\nâ”œâ”€â”€ docker-compose.yml\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ src\nâ”‚Â Â  â”œâ”€â”€ config\nâ”‚Â Â  â”‚Â Â  â””â”€â”€ db.js\nâ”‚Â Â  â”œâ”€â”€ handlers\nâ”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.js\nâ”‚Â Â  â”‚Â Â  â””â”€â”€ product.js\nâ”‚Â Â  â”œâ”€â”€ index.js\nâ”‚Â Â  â”œâ”€â”€ middlewares\nâ”‚Â Â  â”‚Â Â  â”œâ”€â”€ fileUpload.js\nâ”‚Â Â  â”‚Â Â  â””â”€â”€ logger.js\nâ”‚Â Â  â”œâ”€â”€ models\nâ”‚Â Â  â”‚Â Â  â”œâ”€â”€ categoryInit.js\nâ”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.js\nâ”‚Â Â  â”‚Â Â  â”œâ”€â”€ productInit.js\nâ”‚Â Â  â”‚Â Â  â””â”€â”€ sequelize.js\nâ”‚Â Â  â”œâ”€â”€ utils\nâ”‚Â Â  â”‚Â Â  â””â”€â”€ pathHelper.js\nâ”‚Â Â  â””â”€â”€ views\nâ””â”€â”€ static\n    â”œâ”€â”€ exports\n    â””â”€â”€ uploads</code></pre></div>\n<h3 id=\"dá»±ng-database-postgresql\" style=\"position:relative;\"><a href=\"#d%E1%BB%B1ng-database-postgresql\" aria-label=\"dá»±ng database postgresql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dá»±ng database postgresql</h3>\n<p>NhÆ° trong bÃ i trÆ°á»›c vá» <a href=\"https://devgiangho.github.io/golang-slice-tat-tan-tat-va-nhung-dieu-co-the-ban-chua-biet/\">connection pooling</a>, mÃ¬nh Ä‘Ã£ táº¡o 1 DB postgres cho báº£ng Product ráº¥t Ä‘Æ¡n giáº£n. BÃ i nÃ y mÃ¬nh dÃ¹ng láº¡i cÃ¡i schema Ä‘Ã³ vÃ  thay Ä‘á»•i thÃªm 1 chÃºt.</p>\n<p>Láº§n nÃ y mÃ¬nh cÃ³ 1 báº£ng Product, liÃªn káº¿t khÃ³a ngoáº¡i tá»›i báº£ng Category.</p>\n<p>File <code class=\"language-text\">seed.sql</code> Ä‘á»ƒ khá»Ÿi táº¡o database vÃ  chÃ¨n sáºµn 10 danh má»¥c (category):</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- We need double quoted the column names to preserve the case.</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">IF</span> <span class=\"token operator\">NOT</span> <span class=\"token keyword\">EXISTS</span> categories\n<span class=\"token punctuation\">(</span>\n    id          <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">,</span>\n    name        <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    description <span class=\"token keyword\">TEXT</span><span class=\"token punctuation\">,</span>\n    code        <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"createdAt\"</span> <span class=\"token keyword\">TIMESTAMP</span>    <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token function\">NOW</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"updatedAt\"</span> <span class=\"token keyword\">TIMESTAMP</span>    <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token function\">NOW</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">IF</span> <span class=\"token operator\">NOT</span> <span class=\"token keyword\">EXISTS</span> products\n<span class=\"token punctuation\">(</span>\n    id           <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">,</span>\n    name         <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span>   <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    price        <span class=\"token keyword\">NUMERIC</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    description  <span class=\"token keyword\">TEXT</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"categoryId\"</span> <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span>    <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"createdAt\"</span>  <span class=\"token keyword\">TIMESTAMP</span>      <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token function\">NOW</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"updatedAt\"</span>  <span class=\"token keyword\">TIMESTAMP</span>      <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token function\">NOW</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">CONSTRAINT</span> products_categoryId_fk <span class=\"token keyword\">FOREIGN</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"categoryId\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">REFERENCES</span> categories <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">ON</span> <span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">CASCADE</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> categories <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> description<span class=\"token punctuation\">,</span> code<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'b2ff1377-c40c-4c10-b3a4-4d12c2f90bca'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Electronics'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Category for electronic devices'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ELC'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token string\">'8c054e34-e65d-4b6e-b7f1-9d9b556e10d1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Clothing'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Category for clothing items'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'CLT'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token string\">'a18b11cc-9a2e-4a04-b831-dde4667e8e0a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Books'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Category for books and literature'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'BKS'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token string\">'773e7aa3-f06d-42af-a8c3-3cb50d966f26'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Home &amp; Kitchen'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Category for home and kitchen products'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'HKP'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token string\">'b8f3c3eb-30f6-41dd-a7b8-518ff2db616f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Health &amp; Beauty'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Category for health and beauty products'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'HBP'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token string\">'5c6f5df6-5c5f-4a69-a38c-95d330c156e2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Toys &amp; Games'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Category for toys and games'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'TNG'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token string\">'54b31c80-38f6-4e6a-9f70-049a8e0905c9'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Sports &amp; Outdoors'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Category for sports and outdoor products'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'SPO'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token string\">'66d74c4b-4b4d-4a54-935d-6b0b6faa07f4'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Automotive'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Category for automotive products'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'AUT'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token string\">'23212a97-74af-460e-bd3d-7b1320dd1c25'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Office Products'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Category for office supplies and stationery'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'OFS'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">(</span><span class=\"token string\">'141d2f17-91d8-4f9d-9143-3b8213c6f5a5'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Pet Supplies'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Category for pet supplies and accessories'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'PET'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>CÃ³ má»™t lÆ°u Ã½ nhá», postgresql khÃ´ng giá»‘ng vá»›i SQLServer, khi chÃºng ta táº¡o table vá»›i cÃ¡c column thÃ¬ nÃ³ sáº½ tá»± Ä‘á»™ng lowercase háº¿t column name <code class=\"language-text\">createdAt â†’ createdat</code> vÃ  lÃ m cho Sequelize bá»‹ lá»—i.</p>\n<p>Äá»ƒ nÃ© viá»‡c Ä‘Ã³, chÃºng ta cáº§n thÃªm nhÃ¡y kÃ©p (<code class=\"language-text\">&quot;createdAt&quot;</code>) trong DDL.</p>\n<p>Tiáº¿p tá»¥c táº¡o file <code class=\"language-text\">docker-compose.yml</code> Ä‘á»ƒ seed data:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">version: <span class=\"token string\">\"3.9\"</span>\n\nservices:\n  postgres:\n    image: postgres:<span class=\"token number\">13.1</span><span class=\"token operator\">-</span>alpine\n    container_name: product_postgres_container\n    volumes:\n      <span class=\"token operator\">-</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>seed<span class=\"token punctuation\">.</span><span class=\"token keyword\">sql</span>:<span class=\"token operator\">/</span>docker<span class=\"token operator\">-</span>entrypoint<span class=\"token operator\">-</span>initdb<span class=\"token punctuation\">.</span>d<span class=\"token operator\">/</span>seed<span class=\"token punctuation\">.</span><span class=\"token keyword\">sql</span>\n      <span class=\"token operator\">-</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span><span class=\"token keyword\">data</span><span class=\"token operator\">/</span>postgres:<span class=\"token operator\">/</span>var<span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>postgresql<span class=\"token operator\">/</span><span class=\"token keyword\">data</span>\n    environment:\n      <span class=\"token operator\">-</span> POSTGRES_DB<span class=\"token operator\">=</span>${POSTGRES_DB:<span class=\"token operator\">-</span>postgres}\n      <span class=\"token operator\">-</span> POSTGRES_USER<span class=\"token operator\">=</span>${POSTGRES_USER:<span class=\"token operator\">-</span>postgres}\n      <span class=\"token operator\">-</span> POSTGRES_PASSWORD<span class=\"token operator\">=</span>${POSTGRES_PASSWORD:<span class=\"token operator\">-</span>password1}\n    ports:\n      <span class=\"token operator\">-</span> <span class=\"token string\">\"5433:5432\"</span>\n    restart: unless<span class=\"token operator\">-</span>stopped</code></pre></div>\n<p>Giá» ta chá»‰ cáº§n cháº¡y <code class=\"language-text\">docker compose up -d</code> lÃ  Ä‘Ã£ cÃ³ 1 DB postgres á»Ÿ cá»•ng 5433.</p>\n<h3 id=\"dá»±ng-data-model-va-káº¿t-ná»‘i-database\" style=\"position:relative;\"><a href=\"#d%E1%BB%B1ng-data-model-va-k%E1%BA%BFt-n%E1%BB%91i-database\" aria-label=\"dá»±ng data model va káº¿t ná»‘i database permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dá»±ng data model vÃ  káº¿t ná»‘i database</h3>\n<p>MÃ¬nh trÆ°á»›c háº¿t cáº§n má»™t file config Ä‘á»ƒ lÆ°u thiáº¿t láº­p, connection string cá»§a database, Ä‘Ã³ lÃ  file <code class=\"language-text\">/src/config/db.js</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> dbConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">HOST</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">USER</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"postgres\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">PASSWORD</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"password1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">PORT</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"5433\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">DB</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"postgres\"</span><span class=\"token punctuation\">,</span>\n  dialect<span class=\"token punctuation\">:</span> <span class=\"token string\">\"postgres\"</span><span class=\"token punctuation\">,</span>\n  pool<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    max<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// max pool size</span>\n    min<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// min pool size</span>\n    acquire<span class=\"token punctuation\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// timeout to wait connection in  milliseconds</span>\n    idle<span class=\"token punctuation\">:</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// idle time in milliseconds</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> dbConfig<span class=\"token punctuation\">;</span></code></pre></div>\n<p>á» Ä‘Ã¢y mÃ¬nh hardcode luÃ´n cÃ¡c biáº¿n mÃ´i trÆ°á»ng, thá»±c táº¿ cÃ³ thá»ƒ thÃªm vÃ i dÃ²ng Ä‘á»ƒ Ä‘á»c ra tá»« file <code class=\"language-text\">.env</code> .</p>\n<p>Sequelize cÃ³ há»— trá»£ connection pooling máº·c Ä‘á»‹nh luÃ´n trong cÃ¡c thiáº¿t Ä‘áº·t, náº¿u báº¡n chÆ°a biáº¿t thÃ¬ Ä‘á»c bÃ i viáº¿t trÆ°á»›c<sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup> cá»§a mÃ¬nh nhÃ©.</p>\n<p>VÃ o folder <code class=\"language-text\">src/models</code> Ä‘á»ƒ chÃºng ta lÃ m viá»‡c tiáº¿p, Ä‘áº§u tiÃªn chÃºng ta cáº§n 1 instance cá»§a Sequelize, láº¥y config tá»« file config há»“i nÃ£y:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> dbConfig <span class=\"token keyword\">from</span> <span class=\"token string\">\"../config/db.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Sequelize <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"sequelize\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> colors <span class=\"token keyword\">from</span> <span class=\"token string\">\"colors\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> sequelize <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Sequelize</span><span class=\"token punctuation\">(</span>\n  dbConfig<span class=\"token punctuation\">.</span><span class=\"token constant\">DB</span><span class=\"token punctuation\">,</span>\n  dbConfig<span class=\"token punctuation\">.</span><span class=\"token constant\">USER</span><span class=\"token punctuation\">,</span>\n  dbConfig<span class=\"token punctuation\">.</span><span class=\"token constant\">PASSWORD</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    host<span class=\"token punctuation\">:</span> dbConfig<span class=\"token punctuation\">.</span><span class=\"token constant\">HOST</span><span class=\"token punctuation\">,</span>\n    dialect<span class=\"token punctuation\">:</span> dbConfig<span class=\"token punctuation\">.</span>dialect<span class=\"token punctuation\">,</span>\n    operatorsAliases<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    port<span class=\"token punctuation\">:</span> dbConfig<span class=\"token punctuation\">.</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span>\n    pool<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      max<span class=\"token punctuation\">:</span> dbConfig<span class=\"token punctuation\">.</span>pool<span class=\"token punctuation\">.</span>max<span class=\"token punctuation\">,</span>\n      min<span class=\"token punctuation\">:</span> dbConfig<span class=\"token punctuation\">.</span>pool<span class=\"token punctuation\">.</span>min<span class=\"token punctuation\">,</span>\n      acquire<span class=\"token punctuation\">:</span> dbConfig<span class=\"token punctuation\">.</span>pool<span class=\"token punctuation\">.</span>acquire<span class=\"token punctuation\">,</span>\n      idle<span class=\"token punctuation\">:</span> dbConfig<span class=\"token punctuation\">.</span>pool<span class=\"token punctuation\">.</span>idle<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    define<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      timestamps<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      underscored<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    benchmark<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">logging</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">message<span class=\"token punctuation\">,</span> execTime</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        message <span class=\"token operator\">=</span> message<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"... (truncated)\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// You can use something like cloud logging...</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">let</span> color <span class=\"token operator\">=</span> colors<span class=\"token punctuation\">.</span>blue<span class=\"token punctuation\">.</span>bold<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>execTime <span class=\"token operator\">&amp;&amp;</span> execTime <span class=\"token operator\">>=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        color <span class=\"token operator\">=</span> colors<span class=\"token punctuation\">.</span>red<span class=\"token punctuation\">.</span>bold<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>colors<span class=\"token punctuation\">.</span>magenta<span class=\"token punctuation\">.</span><span class=\"token function\">bold</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>execTime<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> ms]</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">color</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nsequelize\n  <span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection has been established successfully.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Unable to connect to the database:\"</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> sequelize<span class=\"token punctuation\">;</span></code></pre></div>\n<p>á» Ä‘Ã¢y mÃ¬nh cÅ©ng lÃ m luÃ´n 1 cÃ¡i logger Ä‘Æ¡n giáº£n cho sequelize, Ä‘á»ƒ in ra nhá»¯ng query nÃ o tá»‘n thá»i gian Ä‘á»ƒ thá»±c thi thÃ¬ bÃ´i nÃ³ thÃ nh mÃ u Ä‘á», khá»i cáº§n dÃ¹ng ASCII code vÃ¬ cÃ³ thÆ° viá»‡n colors lo.</p>\n<p>Tiáº¿p tá»¥c define model schema cho báº£ng Product vÃ  Category tÆ°Æ¡ng tá»©ng 2 file <code class=\"language-text\">ProductInit.js</code> vÃ  <code class=\"language-text\">CategoryInit.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Sequelize <span class=\"token keyword\">from</span> <span class=\"token string\">\"sequelize\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> sequelize <span class=\"token keyword\">from</span> <span class=\"token string\">\"./sequelize.js\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> ProductInit <span class=\"token operator\">=</span> sequelize<span class=\"token punctuation\">.</span><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"products\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  id<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">UUID</span><span class=\"token punctuation\">,</span>\n    defaultValue<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">UUIDV4</span><span class=\"token punctuation\">,</span>\n    primaryKey<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  name<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">STRING</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  price<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">FLOAT</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  description<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">STRING</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  categoryId<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">UUID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  createdAt<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">DATE</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  updatedAt<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">DATE</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ProductInit<span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Sequelize <span class=\"token keyword\">from</span> <span class=\"token string\">\"sequelize\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> sequelize <span class=\"token keyword\">from</span> <span class=\"token string\">\"./sequelize.js\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> CategoryInit <span class=\"token operator\">=</span> sequelize<span class=\"token punctuation\">.</span><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"categories\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  id<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">UUID</span><span class=\"token punctuation\">,</span>\n    defaultValue<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">UUIDV4</span><span class=\"token punctuation\">,</span>\n    primaryKey<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  name<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">STRING</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  code<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">STRING</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  description<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">STRING</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  createdAt<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">DATE</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  updatedAt<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">DATE</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> CategoryInit<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Táº¡o 1 file <code class=\"language-text\">index.js</code> Ä‘á»ƒ khai bÃ¡o thÃªm rÃ ng buá»™c khÃ³a ngoáº¡i cho 2 table trÃªn.</p>\n<p>á» Ä‘Ã¢y Product vÃ  Category cÃ³ quan há»‡ Many-To-One, cho nÃªn mÃ¬nh sá»­ dá»¥ng 2 phÆ°Æ¡ng thá»©c cá»§a Sequelize lÃ  <code class=\"language-text\">hasMany</code> vÃ  <code class=\"language-text\">belongsTo</code> .</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> ProductInit <span class=\"token keyword\">from</span> <span class=\"token string\">\"./productInit.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> CategoryInit <span class=\"token keyword\">from</span> <span class=\"token string\">\"./categoryInit.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Sequelize <span class=\"token keyword\">from</span> <span class=\"token string\">\"sequelize\"</span><span class=\"token punctuation\">;</span>\n\nCategoryInit<span class=\"token punctuation\">.</span>Products <span class=\"token operator\">=</span> CategoryInit<span class=\"token punctuation\">.</span><span class=\"token function\">hasMany</span><span class=\"token punctuation\">(</span>ProductInit<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  foreignKey<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"categoryId\"</span><span class=\"token punctuation\">,</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">UUID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nProductInit<span class=\"token punctuation\">.</span><span class=\"token function\">belongsTo</span><span class=\"token punctuation\">(</span>CategoryInit<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  foreignKey<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"categoryId\"</span><span class=\"token punctuation\">,</span>\n    type<span class=\"token punctuation\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">UUID</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> ProductInit <span class=\"token keyword\">as</span> Product<span class=\"token punctuation\">,</span> CategoryInit <span class=\"token keyword\">as</span> Category <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>CÃ³ thá»ƒ báº¡n sáº½ há»i táº¡i sao mÃ¬nh khÃ´ng khai bÃ¡o luÃ´n relationship á»Ÿ trong <code class=\"language-text\">ProductInit</code> vÃ  <code class=\"language-text\">CategoryInit</code> . ÄÃ¡p Ã¡n lÃ  bá»Ÿi vÃ¬ náº¿u lÃ m váº­y sáº½ xáº£y ra lá»—i circular import.</p>\n<p>MÃ¬nh cÅ©ng muá»‘n export chá»‰ má»—i model Ä‘á»ƒ thao tÃ¡c query, nÃªn cÅ©ng khÃ´ng gÃ¡n 2 model nÃ y vÃ o instance cá»§a Sequelize. Coi tiáº¿p pháº§n dÆ°á»›i thÃ¬ báº¡n sáº½ tháº¥y mÃ¬nh chá»‰ import model tá»« <code class=\"language-text\">models/index.js</code> mÃ  thÃ´i.</p>\n<h3 id=\"cache-láº¡i-file-da-upload\" style=\"position:relative;\"><a href=\"#cache-l%E1%BA%A1i-file-da-upload\" aria-label=\"cache láº¡i file da upload permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cache láº¡i file Ä‘Ã£ upload</h3>\n<p>NhÆ° báº¡n Ä‘Ã£ biáº¿t, lÃºc import thÃ¬ file CSV cÃ³ thá»ƒ lÃªn tá»›i hÃ ng triá»‡u dÃ²ng, do váº­y nÃªn kÃ­ch thÆ°á»›c file khÃ¡ lÃ  lá»›n (táº§m 150mb cho 1 triá»‡u dÃ²ng), tháº¿ nÃªn viá»‡c cache láº¡i file vÃ o á»• cá»©ng lÃ  Ä‘iá»u pháº£i lÃ m.</p>\n<p>Táº¡o 1 middleware <code class=\"language-text\">middlewares/fileUpload.js</code> :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> fs <span class=\"token keyword\">from</span> <span class=\"token string\">\"fs\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> multer <span class=\"token keyword\">from</span> <span class=\"token string\">\"multer\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> appDir <span class=\"token keyword\">from</span> <span class=\"token string\">\"../utils/pathHelper.js\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> storage <span class=\"token operator\">=</span> multer<span class=\"token punctuation\">.</span><span class=\"token function\">diskStorage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">destination</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_req<span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> dir <span class=\"token operator\">=</span> appDir <span class=\"token operator\">+</span> <span class=\"token string\">\"static/uploads\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>dir<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      fs<span class=\"token punctuation\">.</span><span class=\"token function\">mkdirSync</span><span class=\"token punctuation\">(</span>dir<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> recursive<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> dir<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">filename</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_req<span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>hrtime<span class=\"token punctuation\">.</span><span class=\"token function\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>file<span class=\"token punctuation\">.</span>originalname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">csvFilter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_req<span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Reading file in middleware\"</span><span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">.</span>originalname<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>file<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Please upload a file to proceed.\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>mimetype<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"csv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"Please upload only csv file as only CSV is supported for now.\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">multer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  storage<span class=\"token punctuation\">:</span> storage<span class=\"token punctuation\">,</span>\n  fileFilter<span class=\"token punctuation\">:</span> csvFilter<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Äáº·c thÃ¹ há»‡ thá»‘ng lÃ  import CSV, do váº­y nÃªn middleware nÃ y chá»‰ cho phÃ©p upload file cÃ³ Ä‘uÃ´i csv mÃ  thÃ´i, sau Ä‘Ã³ cache láº¡i trong á»• Ä‘Ä©a.</p>\n<p>á» Ä‘Ã¢y mÃ¬nh cache láº¡i file name theo dáº¡ng <code class=\"language-text\">${process.hrtime.bigint()}-${file.originalname}</code> , lÃ½ do mÃ¬nh dÃ¹ng <code class=\"language-text\">process.hrtime.bigint()</code> thay vÃ¬ <code class=\"language-text\">Date.now()</code> chÃ­nh lÃ  khi mÃ¬nh thá»±c hiá»‡n stress test (á»Ÿ bÆ°á»›c tiáº¿p theo) thÃ¬ lÆ°á»£ng request Ä‘á»“ng thá»i ráº¥t lá»›n, khiáº¿n cho hÃ m <code class=\"language-text\">Date.now()</code> tráº£ vá» giÃ¡ trá»‹ Ä‘Ã´i lÃºc giá»‘ng nhau, cho nÃªn file bá»‹ conflict. <code class=\"language-text\">process.hrtime.bigint()</code> tráº£ vá» nanoseconds, cÃ²n <code class=\"language-text\">Date.now()</code> tráº£ vá» milliseconds<sup id=\"fnref-4\"><a href=\"#fn-4\" class=\"footnote-ref\">4</a></sup>.</p>\n<p>á» Ä‘Ã¢y do vá»›i cháº¿ Ä‘á»™ module thÃ¬ tháº±ng quá»· Nodejs khÃ´ng cho phÃ©p gá»i <code class=\"language-text\">__dirname</code>. NÃªn mÃ¬nh lÃ m 1 cÃ¡i file helper Ä‘á»ƒ láº¥y folder root cá»§a project náº±m á»Ÿ <code class=\"language-text\">utils/pathHelper.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> path <span class=\"token keyword\">from</span> <span class=\"token string\">\"path\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> fileURLToPath <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"url\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> __dirname <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span><span class=\"token function\">fileURLToPath</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">import</span><span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> appDir <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"../../\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> appDir<span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"cac-endpoint-rest-api\" style=\"position:relative;\"><a href=\"#cac-endpoint-rest-api\" aria-label=\"cac endpoint rest api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CÃ¡c endpoint REST API</h3>\n<p>NhÆ° Ä‘Ã£ nÃ³i á»Ÿ Ä‘áº§u bÃ i viáº¿t, má»¥c Ä‘Ã­ch chÃ­nh cá»§a service nÃ y lÃ  Ä‘á»ƒ import CSV. Do Ä‘Ã³ mÃ¬nh chá»‰ cÃ³ vÃ i endpoint sau:</p>\n<ul>\n<li><code class=\"language-text\">/</code> - GET: Index, dÃ¹ng Ä‘á»ƒ lÃ m giao diá»‡n cho form upload CSV.</li>\n<li><code class=\"language-text\">/api/products</code> - GET: Láº¥y 200 product má»›i nháº¥t Ä‘á»ƒ hiá»ƒn thá»‹.</li>\n<li><code class=\"language-text\">/api/products/:id</code> - GET: Láº¥y product theo ID.</li>\n<li><code class=\"language-text\">/api/products/export</code> - GET: Export products ra file CSV vÃ  download.</li>\n<li><code class=\"language-text\">/api/products/import</code> - POST: Import CSV file.</li>\n</ul>\n<p>Handler cá»§a nhá»¯ng endpoint nÃ y sáº½ náº±m trong folder <code class=\"language-text\">handlers</code>.</p>\n<p>Báº¯t Ä‘áº§u vá»›i file <code class=\"language-text\">product.js</code> cho nhá»¯ng handler liÃªn quan em nÃ y:</p>\n<h4 id=\"get-many-products\" style=\"position:relative;\"><a href=\"#get-many-products\" aria-label=\"get many products permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Get many products</h4>\n<p>MÃ¬nh query láº¥y ra 200 product má»›i nháº¥t:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findManyProducts</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// should add pagination.</span>\n    <span class=\"token keyword\">const</span> products <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Product<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      limit<span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n      include<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          model<span class=\"token punctuation\">:</span> Category<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      order<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span><span class=\"token string\">\"updatedAt\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"DESC\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span><span class=\"token string\">\"createdAt\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"DESC\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      message<span class=\"token punctuation\">:</span> <span class=\"token string\">\"OK\"</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token punctuation\">:</span> products<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      message<span class=\"token punctuation\">:</span> <span class=\"token string\">\"internal error\"</span><span class=\"token punctuation\">,</span>\n      err<span class=\"token punctuation\">:</span> err<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Thá»±c táº¿ cáº§n pháº£i lÃ m thÃªm pháº§n pagination, nhÆ°ng má»¥c tiÃªu chÃ­nh mÃ¬nh lÃ m khÃ´ng pháº£i á»Ÿ Ä‘Ã³ nÃªn Ä‘Ã£ bá» qua.</p>\n<p>MÃ¬nh cÃ³ dÃ¹ng option include, tá»©c lÃ  sáº½ join vÃ  láº¥y luÃ´n Category vá», káº¿t quáº£ sáº½ hiá»ƒn thá»‹ á»Ÿ postman nhÆ° sau:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2af70692ae27664661d65edc11fdd752/e8814/postman-get-many-products.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA9hAAAPYQGoP6dpAAABOklEQVQoz42RWW7cQAxEdWafKUfIOXwMG87IaqkXNllcJqDGntjIx/iBIIofJVZTy77vtdZSymVNjuPovRONG/MLzEw0wXOt8+n3+PUsSztKq4eqAgLFKRJVdffrJ2amqveRRPuUxd3N7PodEYnvMPOc8z4qoJCllq33Poh6b2OM3AncPhERN+HuACQdyhACjmFQX1pvvVbqg5kVIiIKuf5HZMVd25l3sQhTBRHDGa4W5lnXR0TEAjWPUBrH2+X1fVyOuVUuTdpUqMtHZch/I1KnmaEWgTHGy8vW+HWjtzIrQdT8jPC138vTG8vM1e6mYyvrTqXJYG0E5J+KB7HTbGmXbRu1rVW2xnUAlu9/YGaomrkqi04xhmdX+9HBOHeE0TjW8mefe5dGINEJExjOzrDbtRh5PIGdF/G/o+O/DIFbthAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2af70692ae27664661d65edc11fdd752/c85cb/postman-get-many-products.webp 300w,\n/static/2af70692ae27664661d65edc11fdd752/e88ff/postman-get-many-products.webp 600w,\n/static/2af70692ae27664661d65edc11fdd752/92f8c/postman-get-many-products.webp 1200w,\n/static/2af70692ae27664661d65edc11fdd752/f3c7c/postman-get-many-products.webp 1392w\"\n              sizes=\"(max-width: 1200px) 100vw, 1200px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2af70692ae27664661d65edc11fdd752/5a46d/postman-get-many-products.png 300w,\n/static/2af70692ae27664661d65edc11fdd752/0a47e/postman-get-many-products.png 600w,\n/static/2af70692ae27664661d65edc11fdd752/c1b63/postman-get-many-products.png 1200w,\n/static/2af70692ae27664661d65edc11fdd752/e8814/postman-get-many-products.png 1392w\"\n            sizes=\"(max-width: 1200px) 100vw, 1200px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2af70692ae27664661d65edc11fdd752/c1b63/postman-get-many-products.png\"\n            alt=\"postman-get-many-products.png\"\n            title=\"postman-get-many-products.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h4 id=\"get-product-by-id\" style=\"position:relative;\"><a href=\"#get-product-by-id\" aria-label=\"get product by id permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Get product by ID</h4>\n<p>CÅ©ng giá»‘ng vá»›i findMany, khi láº¥y chá»‰ 1 product theo ID thÃ¬ chÃºng ta chá»‰ cáº§n láº¥y id tá»« path params vÃ o thÃ´i:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">findOneProduct</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> product <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Product<span class=\"token punctuation\">.</span><span class=\"token function\">findByPk</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      include<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          model<span class=\"token punctuation\">:</span> Category<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>product<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        message<span class=\"token punctuation\">:</span> <span class=\"token string\">\"OK\"</span><span class=\"token punctuation\">,</span>\n        data<span class=\"token punctuation\">:</span> product<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">404</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        message<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Cannot find Product with id=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      message<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error retrieving Product with id=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      error<span class=\"token punctuation\">:</span> err<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Káº¿t quáº£ khi gá»i postman:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f49b1ae572906db71cbbb3c4defa3b6b/062c8/postman-get-one-product.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA9hAAAPYQGoP6dpAAABOUlEQVQoz4WQXXIcIQyE59S+UY6Qc/gUrtrYM4YFCfTTYlKw3k2ch+xXegCqWnT3di2lEqWU92Pf9z2nxEStNV70O7JorZv0vcjLT/7xKlu9JqIKhLs7HICZmRoABM47WDyuZtZFN1M1s/M7ZjbGOM9z3BGRLvK4+vzBti7C3CLwh+nBx3fmk/lj+wiH26aqjXkuXsHWRiOiW2YiurmdLTSeipkOhXXaTsdeSiHmWutsSLqr/uV3uV+ZPWYlU49ggTk2NVNm5SYeDqhDzb8U/yWAzREw6ykfuR1FSJzEu8IQc3wNwh/nNYjpaTMHItrlcj3y22d7O/g99yupGBzDl+zf8YibWMwQoTnlTHvR0oy6q+Op7SnuahjDaq2XXx+5v+eeSFlcbFp7ItZV/bSiqo6u6M9kX4VF/AY4d78CUCxT/AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f49b1ae572906db71cbbb3c4defa3b6b/c85cb/postman-get-one-product.webp 300w,\n/static/f49b1ae572906db71cbbb3c4defa3b6b/e88ff/postman-get-one-product.webp 600w,\n/static/f49b1ae572906db71cbbb3c4defa3b6b/92f8c/postman-get-one-product.webp 1200w,\n/static/f49b1ae572906db71cbbb3c4defa3b6b/df861/postman-get-one-product.webp 1386w\"\n              sizes=\"(max-width: 1200px) 100vw, 1200px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f49b1ae572906db71cbbb3c4defa3b6b/5a46d/postman-get-one-product.png 300w,\n/static/f49b1ae572906db71cbbb3c4defa3b6b/0a47e/postman-get-one-product.png 600w,\n/static/f49b1ae572906db71cbbb3c4defa3b6b/c1b63/postman-get-one-product.png 1200w,\n/static/f49b1ae572906db71cbbb3c4defa3b6b/062c8/postman-get-one-product.png 1386w\"\n            sizes=\"(max-width: 1200px) 100vw, 1200px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f49b1ae572906db71cbbb3c4defa3b6b/c1b63/postman-get-one-product.png\"\n            alt=\"postman-get-one-product.png\"\n            title=\"postman-get-one-product.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h4 id=\"import-products\" style=\"position:relative;\"><a href=\"#import-products\" aria-label=\"import products permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Import products</h4>\n<p>ÄÃ¢y lÃ  nhÃ¢n váº­t chÃ­nh cá»§a ngÃ y hÃ´m nay, endpoint dÃ¹ng Ä‘á»ƒ xá»­ lÃ½ file CSV vÃ  thÃªm vÃ o database.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">importProducts</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>req<span class=\"token punctuation\">.</span>file<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      message<span class=\"token punctuation\">:</span> <span class=\"token string\">\"No file is uploaded\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> rows <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> path <span class=\"token operator\">=</span> appDir <span class=\"token operator\">+</span> <span class=\"token string\">\"static/uploads/\"</span> <span class=\"token operator\">+</span> req<span class=\"token punctuation\">.</span>file<span class=\"token punctuation\">.</span>filename<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> categories <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Category<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    attributes<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"code\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> categoryMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span>\n    categories<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">.</span>dataValues<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">.</span>dataValues<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> rowNumber <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> parser <span class=\"token operator\">=</span> csv\n      <span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> headers<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span>promises<span class=\"token punctuation\">.</span><span class=\"token function\">unlink</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> message<span class=\"token punctuation\">:</span> err<span class=\"token punctuation\">.</span>message <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"data\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> category <span class=\"token operator\">=</span> categoryMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>categoryCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>category<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Row </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>rowNumber<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, category not found.\\nData: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>\n              data\n            <span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        rows<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>data<span class=\"token punctuation\">,</span> categoryId<span class=\"token punctuation\">:</span> category<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        rowNumber<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"end\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Remove the uploaded file after parsing</span>\n        <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span>promises<span class=\"token punctuation\">.</span><span class=\"token function\">unlink</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Map the parsed data into the Product model</span>\n        <span class=\"token keyword\">const</span> products <span class=\"token operator\">=</span> rows<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> price<span class=\"token punctuation\">,</span> description<span class=\"token punctuation\">,</span> categoryId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            name<span class=\"token punctuation\">,</span>\n            price<span class=\"token punctuation\">,</span>\n            description<span class=\"token punctuation\">,</span>\n            categoryId<span class=\"token punctuation\">,</span>\n            createdAt<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            updatedAt<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Import the products into the database</span>\n        <span class=\"token keyword\">await</span> Product<span class=\"token punctuation\">.</span><span class=\"token function\">bulkCreate</span><span class=\"token punctuation\">(</span>products<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> message<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Products imported successfully\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">createReadStream</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>parser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> message<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Internal server error\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Báº¡n Ä‘á»ƒ Ã½ dÃ²ng code <code class=\"language-text\">await fs.promises.unlink(path);</code> , dÃ²ng nÃ y cÃ³ nhiá»‡m vá»¥ xÃ³a Ä‘i file Ä‘Ã£ cache trÆ°á»›c Ä‘Ã³ khi process xong hoáº·c process bá»‹ lá»—i.</p>\n<p>ÄÃ¢y lÃ  format cá»§a file CSV:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">name,price,categoryCode,description</code></pre></div>\n<p>Trong pháº§n trÃªn, mÃ¬nh Ä‘Ã£ láº¥y táº¥t cáº£ category code vÃ  Ä‘Æ°a vÃ o 1 Map, sau Ä‘Ã³ vá»›i má»—i dÃ²ng trong CSV thÃ¬ mÃ¬nh sáº½ kiá»ƒm tra xem category cÃ³ tá»“n táº¡i hay khÃ´ng, náº¿u cÃ³ thÃ¬ gÃ¡n categoryId cho nÃ³, náº¿u khÃ´ng, thÃ¬ tráº£ vá» vá»›i 1 lá»—i.</p>\n<p>HÃ£y trÃ¡nh viá»‡c gá»i db nhiá»u láº§n Ä‘á»ƒ láº¥y database, nÃ³ sáº½ lÃ m app báº¡n cháº­m Ä‘i Ä‘Ã¡ng ká»ƒ Ä‘áº¥y.</p>\n<p>ÄÃ¢y chá»‰ lÃ  cÆ¡ cháº¿ validation cÆ¡ báº£n, cÃ¢n nháº¯c validation nhiá»u hÆ¡n náº¿u báº¡n dÃ¹ng trong thá»±c táº¿ nha.</p>\n<h4 id=\"export-product\" style=\"position:relative;\"><a href=\"#export-product\" aria-label=\"export product permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Export product</h4>\n<p>Handler nÃ y export product ra CSV vá»›i schema y chang lÃºc mÃ¬nh Ä‘Ã£ import. MÃ¬nh cho tá»‘i Ä‘a export 1 triá»‡u báº£n ghi, cÃ²n máº·c Ä‘á»‹nh sáº½ lÃ  100k báº£n ghi. Chá»© Ä‘á»ƒ export quÃ¡ nhiá»u cháº¯c chá»›t luÃ´n há»‡ thá»‘ng.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">exportProducts</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> limit <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">.</span>limit <span class=\"token operator\">||</span> <span class=\"token number\">100000</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>limit <span class=\"token operator\">||</span> limit <span class=\"token operator\">></span> <span class=\"token number\">1000000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    limit <span class=\"token operator\">=</span> <span class=\"token number\">1000000</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> products <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Product<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    limit<span class=\"token punctuation\">:</span> limit<span class=\"token punctuation\">,</span>\n    attributes<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"price\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"description\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    include<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        model<span class=\"token punctuation\">:</span> Category<span class=\"token punctuation\">,</span>\n        attributes<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"code\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    subQuery<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    raw<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> dir <span class=\"token operator\">=</span> appDir <span class=\"token operator\">+</span> <span class=\"token string\">\"static/exports\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>dir<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">mkdirSync</span><span class=\"token punctuation\">(</span>dir<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> recursive<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> fileName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dir<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>hrtime<span class=\"token punctuation\">.</span><span class=\"token function\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-products.csv</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> csvWriter <span class=\"token operator\">=</span> <span class=\"token function\">createObjectCsvWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">:</span> fileName<span class=\"token punctuation\">,</span>\n    header<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"name\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"price\"</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"price\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"category.code\"</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"categoryCode\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"description\"</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"description\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">await</span> csvWriter\n    <span class=\"token punctuation\">.</span><span class=\"token function\">writeRecords</span><span class=\"token punctuation\">(</span>products<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CSV file exported successfully\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">,</span> <span class=\"token string\">\"UTF-8\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Type\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"text/csv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span>\n          <span class=\"token string\">\"Content-Disposition\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"attachment; filename=products.csv\"</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">finally</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">unlink</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DELETED THE TEMP FILE\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>MÃ¬nh cÃ³ tá»‘i Æ°u láº¡i má»™t chÃºt query Ä‘á»ƒ hiá»‡u nÄƒng tá»‘t hÆ¡n:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> products <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Product<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  limit<span class=\"token punctuation\">:</span> limit<span class=\"token punctuation\">,</span>\n  attributes<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"price\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"description\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  include<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      model<span class=\"token punctuation\">:</span> Category<span class=\"token punctuation\">,</span>\n      attributes<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"code\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  subQuery<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  raw<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Vá»›i query sequelize nhÆ° trÃªn, thÃ¬ ta cÃ³ káº¿t quáº£ lÃ  má»™t array vá»›i nhá»¯ng product nhÆ° sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Handcrafted Fresh Salad\"</span><span class=\"token punctuation\">,</span>\n    price<span class=\"token punctuation\">:</span> <span class=\"token string\">\"602.00\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Boston's most advanced compression wea....\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"category.code\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"BKS\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Äiá»ƒm Ä‘áº·c biá»‡t lÃ  <code class=\"language-text\">&#39;category.code&#39;</code> , mÃ  trong Javascript thÃ¬ key cá»§a 1 object cÃ³ thá»ƒ lÃ  string, do Ä‘Ã³ nÃ³ há»£p lá»‡.</p>\n<p>CÃ³ 2 option mÃ¬nh truyá»n vÃ o lÃ  <strong>subQuery</strong> cÅ©ng nhÆ° <strong>raw</strong>. CÃ¡i trÆ°á»›c sáº½ táº¯t chá»©c nÄƒng subquery, cÃ¡i sau sáº½ khÃ´ng transform dá»¯ liá»‡u mÃ  chá»‰ láº¥y nhá»¯ng prop nhÆ° mÃ¬nh select, 2 tÃ¹y chá»n nÃ y Ä‘á»u gÃ³p pháº§n tÄƒng hiá»‡u nÄƒng cá»§a API.</p>\n<p>Raw query sequelize compile ra nhÆ° sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token number\">14</span> ms<span class=\"token punctuation\">]</span> <span class=\"token function\">Executed</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">SELECT</span> <span class=\"token string\">\"products\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"products\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"price\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"products\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"description\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"category\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"code\"</span> <span class=\"token constant\">AS</span> <span class=\"token string\">\"category.code\"</span>\n\t<span class=\"token constant\">FROM</span> <span class=\"token string\">\"products\"</span> <span class=\"token constant\">AS</span> <span class=\"token string\">\"products\"</span>\n\t<span class=\"token constant\">LEFT</span> <span class=\"token constant\">OUTER</span> <span class=\"token constant\">JOIN</span> <span class=\"token string\">\"categories\"</span> <span class=\"token constant\">AS</span> <span class=\"token string\">\"category\"</span>\n\t\t<span class=\"token constant\">ON</span> <span class=\"token string\">\"products\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"categoryId\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"category\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"id\"</span>\n\t<span class=\"token constant\">LIMIT</span> <span class=\"token string\">'1000'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"middleware-logger\" style=\"position:relative;\"><a href=\"#middleware-logger\" aria-label=\"middleware logger permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Middleware logger</h3>\n<p>á» Ä‘Ã¢y mÃ¬nh cÃ³ dÃ¹ng thÃªm 1 em logger <code class=\"language-text\">middlewares/logger.js</code>, má»¥c Ä‘Ã­ch Ä‘á»ƒ xem console cÃ³ request nÃ o vá»›i status code nÃ o, lÃºc benchmark nhÃ¬n vÃ o console sáº½ trá»±c quan hÆ¡n, fancy hÆ¡n:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> colors <span class=\"token keyword\">from</span> <span class=\"token string\">\"colors\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">logger</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'finish'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> color<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">>=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            color <span class=\"token operator\">=</span> colors<span class=\"token punctuation\">.</span>red<span class=\"token punctuation\">.</span>bold<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">>=</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            color <span class=\"token operator\">=</span> colors<span class=\"token punctuation\">.</span>yellow<span class=\"token punctuation\">.</span>bold<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            color <span class=\"token operator\">=</span> colors<span class=\"token punctuation\">.</span>green<span class=\"token punctuation\">.</span>bold<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>req<span class=\"token punctuation\">.</span>method<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>req<span class=\"token punctuation\">.</span>originalUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>res<span class=\"token punctuation\">.</span>statusCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toISOString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> logger<span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"ui-cho-trang-chá»§\" style=\"position:relative;\"><a href=\"#ui-cho-trang-ch%E1%BB%A7\" aria-label=\"ui cho trang chá»§ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UI cho trang chá»§</h3>\n<p>Äá»ƒ dá»… test hÆ¡n thÃ¬ mÃ¬nh cÃ³ táº¡o 1 trang UI á»Ÿ index Ä‘á»ƒ cÃ³ form upload file cÅ©ng nhÆ° show ra danh sÃ¡ch product (cÃ³ phÃ¢n trang), Ä‘Ã¢y lÃ  <code class=\"language-text\">handlers/index.js</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">index</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> perPage <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> offset <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>page <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> perPage<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> products <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Product<span class=\"token punctuation\">.</span><span class=\"token function\">findAndCountAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      limit<span class=\"token punctuation\">:</span> perPage<span class=\"token punctuation\">,</span>\n      offset<span class=\"token punctuation\">:</span> offset<span class=\"token punctuation\">,</span>\n      order<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span><span class=\"token string\">\"updatedAt\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"DESC\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span><span class=\"token string\">\"createdAt\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"DESC\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> pageCount <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>products<span class=\"token punctuation\">.</span>count <span class=\"token operator\">/</span> perPage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> pages <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> pageCount<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      pages<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"index\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      products<span class=\"token punctuation\">:</span> products<span class=\"token punctuation\">.</span>rows<span class=\"token punctuation\">,</span>\n      pages<span class=\"token punctuation\">:</span> pages<span class=\"token punctuation\">,</span>\n      totalPages<span class=\"token punctuation\">:</span> pages<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span>\n      currentPage<span class=\"token punctuation\">:</span> page<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"index\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>MÃ¬nh cÅ©ng cÃ³ thÃªm 1 view template cá»§a ejs, nhÆ°ng mÃ  nÃ³ dÃ i láº¯m, mÃ¬nh chá»‰ show cÃ¡i form Ä‘á»ƒ upload, vá»›i cÃ¡i table thÃ´i nha:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"form-group\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>label <span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"file\"</span><span class=\"token operator\">></span>Select <span class=\"token constant\">CSV</span> file to <span class=\"token keyword\">import</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"file\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"form-control-file\"</span> id<span class=\"token operator\">=</span><span class=\"token string\">\"file\"</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"file\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>button type<span class=\"token operator\">=</span><span class=\"token string\">\"button\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"btn btn-primary\"</span> id<span class=\"token operator\">=</span><span class=\"token string\">\"import-btn\"</span><span class=\"token operator\">></span>Import<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"table-responsive\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>table <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"table table-striped table-hover\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>thead<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>Name<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>Price<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>Description<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>Created At<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>Updated At<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>thead<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>tbody<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> products<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">product</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> product<span class=\"token punctuation\">.</span>name <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> product<span class=\"token punctuation\">.</span>price <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> product<span class=\"token punctuation\">.</span>description <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> product<span class=\"token punctuation\">.</span>createdAt<span class=\"token punctuation\">.</span><span class=\"token function\">toDateString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> product<span class=\"token punctuation\">.</span>updatedAt<span class=\"token punctuation\">.</span><span class=\"token function\">toDateString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tbody<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n    <span class=\"token keyword\">const</span> importBtn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'import-btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    importBtn<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> fileInput <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'file'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> file <span class=\"token operator\">=</span> fileInput<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> formData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        formData<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'file'</span><span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/products/import'</span><span class=\"token punctuation\">,</span> formData<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"success\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token comment\">// handle error response here</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<h3 id=\"cai-dáº·t-express-server\" style=\"position:relative;\"><a href=\"#cai-d%E1%BA%B7t-express-server\" aria-label=\"cai dáº·t express server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CÃ i Ä‘áº·t express server</h3>\n<p>á» file <code class=\"language-text\">index.js</code>, chÃºng ta cáº§n khai bÃ¡o vÃ  khá»Ÿi cháº¡y expressjs server:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> express <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  exportProducts<span class=\"token punctuation\">,</span>\n  findManyProducts<span class=\"token punctuation\">,</span>\n  findOneProduct<span class=\"token punctuation\">,</span>\n  importProducts<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./handlers/product.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> index <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./handlers/index.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> uploadMiddleware <span class=\"token keyword\">from</span> <span class=\"token string\">\"./middlewares/fileUpload.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> logger <span class=\"token keyword\">from</span> <span class=\"token string\">\"./middlewares/logger.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> appDir <span class=\"token keyword\">from</span> <span class=\"token string\">\"./utils/pathHelper.js\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">PORT</span> <span class=\"token operator\">||</span> <span class=\"token number\">8080</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"view engine\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ejs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"views\"</span><span class=\"token punctuation\">,</span> appDir <span class=\"token operator\">+</span> <span class=\"token string\">\"src/views\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// parse requests of content-type - application/json</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// parse requests of content-type - application/x-www-form-urlencoded</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">urlencoded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> extended<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>logger<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// routing</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/products\"</span><span class=\"token punctuation\">,</span> findManyProducts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">\"/api/products/import\"</span><span class=\"token punctuation\">,</span>\n  uploadMiddleware<span class=\"token punctuation\">.</span><span class=\"token function\">single</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"file\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  importProducts\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/products/export\"</span><span class=\"token punctuation\">,</span> exportProducts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/products/:id\"</span><span class=\"token punctuation\">,</span> findOneProduct<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"App is listening on port \"</span> <span class=\"token operator\">+</span> <span class=\"token constant\">PORT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error occurred, server can't start\"</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"cháº¡y-app-len\" style=\"position:relative;\"><a href=\"#ch%E1%BA%A1y-app-len\" aria-label=\"cháº¡y app len permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cháº¡y app lÃªn</h3>\n<p>Äá»ƒ cháº¡y Ä‘Æ°á»£c app ta cÃ³ thá»ƒ gÃµ <code class=\"language-text\">node src/index.js</code>, nhÆ°ng khÃ´ng, thÆ°á»ng thÃ¬ ta thÃªm sáºµn script, rá»“i lÃºc cáº§n cháº¡y <code class=\"language-text\">yarn dev</code> hoáº·c <code class=\"language-text\">npm run dev</code> lÃ  Ä‘Æ°á»£c:</p>\n<p>á» Ä‘Ã¢y mÃ¬nh dÃ¹ng nodemon Ä‘á»ƒ cÃ³ thá»ƒ theo dÃµi Ä‘Æ°á»£c code change vÃ  reload app luÃ´n.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"nodemon src/index.js --watch -max-old-space-size=2048\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node src/index.js -max-old-space-size=2048\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>LÃºc mÃ¬nh test benchmark thÃ¬ app bÃ¡o trÃ n memory, nÃªn mÃ¬nh set lÃªn 2GB ram, tÃ¬nh tráº¡ng Ä‘Ã³ khÃ´ng cÃ²n ná»¯a. Pháº£i thÃ´i, nhá»¯ng file mÃ¬nh import cáº£ 100k - 1m rows, import hÃ ng ngÃ n request thÃ¬ RAM nÃ o chá»‹u ná»•i :D.</p>\n<p>Vá»›i production thÃ¬ nÃªn set biáº¿n nÃ y tÃ¹y theo monitoring vÃ  yÃªu cáº§u nha.</p>\n<p>Cháº¡y app lÃªn vÃ  see:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1019px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7b179cda0049a3245d2ea6dadc43b205/159fb/run-yarn-start.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA9hAAAPYQGoP6dpAAAA5ElEQVQY033OSWrDQBCFYZ0lMe6We1BVVw/Vrcmy5CHZBJID5Aa5/zLYgoANDnzL98OrXrYmje/58JHmrzh9Uneh7uLyKfEceU43kZfES8hHuoE4raqNMLGdXDn48Q3LokOvw2Bp8K54VxAYbIImYZNswwpYA0vtV9WrMBRbcNkiAxX0PVJnMBtqrSvShK32K6FIKvorr/FGANGEPLtywrwAz1gWRYNynfZDbVOtqdZ+JXW4i+XOtP0Z/NCEEeIewtjEEeKIaW99L83d+kGFxx+FLHZOrq8ePC+vse6/hfL/j57Fv51tUm8o9DBPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7b179cda0049a3245d2ea6dadc43b205/c85cb/run-yarn-start.webp 300w,\n/static/7b179cda0049a3245d2ea6dadc43b205/e88ff/run-yarn-start.webp 600w,\n/static/7b179cda0049a3245d2ea6dadc43b205/6b83e/run-yarn-start.webp 1019w\"\n              sizes=\"(max-width: 1019px) 100vw, 1019px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7b179cda0049a3245d2ea6dadc43b205/5a46d/run-yarn-start.png 300w,\n/static/7b179cda0049a3245d2ea6dadc43b205/0a47e/run-yarn-start.png 600w,\n/static/7b179cda0049a3245d2ea6dadc43b205/159fb/run-yarn-start.png 1019w\"\n            sizes=\"(max-width: 1019px) 100vw, 1019px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7b179cda0049a3245d2ea6dadc43b205/159fb/run-yarn-start.png\"\n            alt=\"run-yarn-start.png\"\n            title=\"run-yarn-start.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>CÃ²n Ä‘Ã¢y lÃ  giao diá»‡n, mÃ¬nh code táº¡m báº±ng bootstrap:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1066px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cbd7c90e44a8e14e6698cfd8c8ce93d6/2e367/ui-product-nodejs-importer-csv-browser.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADOklEQVQ4y3VS34sbVRTOHyFoUbaLVVHwwWpBEWTHhyLUgk8+9skHEX3x7yjpUxHsk9ts1kXEtPZFtygborupu5V0t5ptk/2VmUky986vZGby487M/eTcSTZZsBc+zuFyzne+79ybe3/h2s33zn+FS4uf4+LCZ7i0+CUuvnwNr5y7gsXnPsL5Z+DV56/itReu4PUXP8Yb5z7Fuy99jQ8WvriZ++3+H9e3q3uobtaG1a1a/HCnHu89asaPa424tlOPa9v1+NFOPd59uH8Gf2/vxw+29uLt6r9xdas2/OvBLn79pXI9NxhGeWRHAJCU7HvAh7eBq2vAJz8AS8vAW98Cb98C3rkFvPkN8MTH9MhJL6IoyOc453kpJZIkEUmSAjKFFyWo7Pso1z3cf+zh9ycDlA9TlA8ShY1momqolnqolziYxfI5x3GUQimlupQyG1rZNbDb7GAc2BDRTA7mhE1rqZcy27ZnhGmaKkKqSlOJ/J/Aj/9krYkEklSeQZqxYSqGIrk9JZzuYXZShTTNkKk/i+k9iTlV6HlefjQaodPpiE63i3angygaTCbjf4nknLp5MaeEQggwboskSeD7PQRhCM/3EUYRnnVIhOO4qoZxLmgF5FYRjscjnLRagnEO23HAGEOrpePw8AiGYcA02zg5aUE3DOi6gWkd1ViWhePjExEnCVzXnVlmjAnf95VC13XRaDRhGKYiM9tt6LoO0zTVACIjdY6KDllV7hQhyaTlcs5FFEWI4xgUwzDMEEUYDAYIwwhBEExiqGp6/b6Kvt9TO5yzPMbh0ZGgydTkeb6azDmfg61A6/A8D9ymPLPe7Vpnd0iWnzYagjEuXdeVXcuSR8fHsnlwoPC00ZCNRnOSN6VlWQqGaaralq7PLBMhfYNOpyvG4zH9BzkajaRptqXZbkvbtiW3bWkxJhnnknNbBmEohRAqDodDGQTBzDJj7AYpdD0vpX3Ql6GHoYcgi9lDZfAmoLzf76PX66no+35Ka7Ms60auXC5fqFQql79bXl5aX1/X7t37Wft+bU27c/eutrJS1AqFglZcXdVWiqsqLxRWtGJxVfupVFL3pVJJu10oLG1ubl7e2Ni48B992Ktw7DJunQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/cbd7c90e44a8e14e6698cfd8c8ce93d6/c85cb/ui-product-nodejs-importer-csv-browser.webp 300w,\n/static/cbd7c90e44a8e14e6698cfd8c8ce93d6/e88ff/ui-product-nodejs-importer-csv-browser.webp 600w,\n/static/cbd7c90e44a8e14e6698cfd8c8ce93d6/fbb05/ui-product-nodejs-importer-csv-browser.webp 1066w\"\n              sizes=\"(max-width: 1066px) 100vw, 1066px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/cbd7c90e44a8e14e6698cfd8c8ce93d6/5a46d/ui-product-nodejs-importer-csv-browser.png 300w,\n/static/cbd7c90e44a8e14e6698cfd8c8ce93d6/0a47e/ui-product-nodejs-importer-csv-browser.png 600w,\n/static/cbd7c90e44a8e14e6698cfd8c8ce93d6/2e367/ui-product-nodejs-importer-csv-browser.png 1066w\"\n            sizes=\"(max-width: 1066px) 100vw, 1066px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/cbd7c90e44a8e14e6698cfd8c8ce93d6/2e367/ui-product-nodejs-importer-csv-browser.png\"\n            alt=\"ui-product-nodejs-importer-csv-browser.png\"\n            title=\"ui-product-nodejs-importer-csv-browser.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>MÃ¬nh cÃ³ thá»­ import vÃ i file trÆ°á»›c Ä‘Ã³ rá»“i cho nÃªn á»Ÿ file nÃ y cÃ³ show ra vÃ i sáº£n pháº©m.</p>\n<p>LÃºc test náº¿u khÃ´ng in ra console thÃ¬ cháº³ng biáº¿t nÃ³ process tháº¿ nÃ o, endpoint nÃ o, thÃ nh cÃ´ng hay tháº¥t b, do Ä‘Ã³ cÃ¡i logger phÃ­a trÃªn Ä‘Ã£ giÃºp chÃºng ta cÃ³ 1 cÃ¡i console fancy nhÆ° sau:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/383c4358cf7add84030c2abd5e19a198/e84a7/app-running-log.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA9hAAAPYQGoP6dpAAABsElEQVQozy2QSY6kMBBFOUyVVGBHOIzniSGBJBm6Vn2Dvv8dWpApPYVefG/8o2rApv7UadV594+/pvttwyzdRG6SfiF/+VvuZJZ+kmF5e/UDnsKO+cC4ifIH4gvTjukA/xT5xPTCuFE5RT4wrKL/xbSJcoq0i7RXNVqdRvJFuEKuR9MJ2wvTNxTe1CI0IjQU68/0DcX3U/XDTBtemA+IL5F3CCumDdMObr5mWDGs17/SBn4R5YS4Yt4xbhhf1Q/5Nj6kK9IW6QZpOmkHsgOXCWTkF/kjbYK23Hm6JsWKMdXZYbS5mDyYklXu9UWQodc5qZja2OvcqRTbMOic29ipVC5ihai0cqSckFbKIMjTDYDhXHOuEW8BDWAQPsK5ZlxXcvyn4pP6g7qDulOkF5WT0s79cnd+gn++y19JPu6jHFfztFVMjzJOFEbhRwozmoH8LNzM28L0wFTHdf/BDNyMrC33OjDVVwy0iouIs4gLxSe6ScQV3cT1AH7mduR6QDdz++C6R79cuZvBPsBOVQ2GydAIz8jXaBl5kA7a8N20b75q+c3UZ2Xqq5HfjayFa4T7D2VajKWb/2fyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/383c4358cf7add84030c2abd5e19a198/c85cb/app-running-log.webp 300w,\n/static/383c4358cf7add84030c2abd5e19a198/e88ff/app-running-log.webp 600w,\n/static/383c4358cf7add84030c2abd5e19a198/92f8c/app-running-log.webp 1200w,\n/static/383c4358cf7add84030c2abd5e19a198/25b5c/app-running-log.webp 1317w\"\n              sizes=\"(max-width: 1200px) 100vw, 1200px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/383c4358cf7add84030c2abd5e19a198/5a46d/app-running-log.png 300w,\n/static/383c4358cf7add84030c2abd5e19a198/0a47e/app-running-log.png 600w,\n/static/383c4358cf7add84030c2abd5e19a198/c1b63/app-running-log.png 1200w,\n/static/383c4358cf7add84030c2abd5e19a198/e84a7/app-running-log.png 1317w\"\n            sizes=\"(max-width: 1200px) 100vw, 1200px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/383c4358cf7add84030c2abd5e19a198/c1b63/app-running-log.png\"\n            alt=\"logger on console\"\n            title=\"logger on console\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"benchmark\" style=\"position:relative;\"><a href=\"#benchmark\" aria-label=\"benchmark permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Benchmark</h2>\n<p>á» bÆ°á»›c trÃªn chÃºng ta Ä‘Ã£ cÃ i thÆ° viá»‡n <code class=\"language-text\">autocannon</code>, sau khi thá»­ qua nhiá»u thÆ° viá»‡n thÃ¬ mÃ¬nh dá»«ng láº¡i vá»›i em nÃ y bá»Ÿi vÃ¬ nÃ³ há»— trá»£ upload file. CÃ²n artillery thÃ¬ chá»‰ cÃ³ báº£n pro má»›i support tÃ­nh nÄƒng Ä‘Ã³.</p>\n<h3 id=\"táº¡o-file-csv-máº«u\" style=\"position:relative;\"><a href=\"#t%E1%BA%A1o-file-csv-m%E1%BA%ABu\" aria-label=\"táº¡o file csv máº«u permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Táº¡o file CSV máº«u</h3>\n<p>Äá»ƒ viá»‡c táº¡o CSV dá»… dÃ ng hÆ¡n, mÃ¬nh sá»­ dá»¥ng fakerjs mÃ  mÃ¬nh Ä‘Ã£ cÃ i Ä‘áº·t trÆ°á»›c Ä‘Ã³.</p>\n<p>Táº¡o file <code class=\"language-text\">csv-generator.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> faker <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@faker-js/faker\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createObjectCsvWriter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"csv-writer\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> categories <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"b2ff1377-c40c-4c10-b3a4-4d12c2f90bca\"</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Electronics\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Category for electronic devices\"</span><span class=\"token punctuation\">,</span>\n    code<span class=\"token punctuation\">:</span> <span class=\"token string\">\"ELC\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"8c054e34-e65d-4b6e-b7f1-9d9b556e10d1\"</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Clothing\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Category for clothing items\"</span><span class=\"token punctuation\">,</span>\n    code<span class=\"token punctuation\">:</span> <span class=\"token string\">\"CLT\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"a18b11cc-9a2e-4a04-b831-dde4667e8e0a\"</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Books\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Category for books and literature\"</span><span class=\"token punctuation\">,</span>\n    code<span class=\"token punctuation\">:</span> <span class=\"token string\">\"BKS\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"773e7aa3-f06d-42af-a8c3-3cb50d966f26\"</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Home &amp; Kitchen\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Category for home and kitchen products\"</span><span class=\"token punctuation\">,</span>\n    code<span class=\"token punctuation\">:</span> <span class=\"token string\">\"HKP\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"b8f3c3eb-30f6-41dd-a7b8-518ff2db616f\"</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Health &amp; Beauty\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Category for health and beauty products\"</span><span class=\"token punctuation\">,</span>\n    code<span class=\"token punctuation\">:</span> <span class=\"token string\">\"HBP\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"5c6f5df6-5c5f-4a69-a38c-95d330c156e2\"</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Toys &amp; Games\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Category for toys and games\"</span><span class=\"token punctuation\">,</span>\n    code<span class=\"token punctuation\">:</span> <span class=\"token string\">\"TNG\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"54b31c80-38f6-4e6a-9f70-049a8e0905c9\"</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Sports &amp; Outdoors\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Category for sports and outdoor products\"</span><span class=\"token punctuation\">,</span>\n    code<span class=\"token punctuation\">:</span> <span class=\"token string\">\"SPO\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"66d74c4b-4b4d-4a54-935d-6b0b6faa07f4\"</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Automotive\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Category for automotive products\"</span><span class=\"token punctuation\">,</span>\n    code<span class=\"token punctuation\">:</span> <span class=\"token string\">\"AUT\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"23212a97-74af-460e-bd3d-7b1320dd1c25\"</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Office Products\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Category for office supplies and stationery\"</span><span class=\"token punctuation\">,</span>\n    code<span class=\"token punctuation\">:</span> <span class=\"token string\">\"OFS\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"141d2f17-91d8-4f9d-9143-3b8213c6f5a5\"</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Pet Supplies\"</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Category for pet supplies and accessories\"</span><span class=\"token punctuation\">,</span>\n    code<span class=\"token punctuation\">:</span> <span class=\"token string\">\"PET\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> categoryCodes <span class=\"token operator\">=</span> categories<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> c<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateProductsCsv</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">rows</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> csvWriter <span class=\"token operator\">=</span> <span class=\"token function\">createObjectCsvWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./bench/sample-csv/products-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>rows<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-rows.csv</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    header<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"name\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"price\"</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"price\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"categoryCode\"</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"categoryCode\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> <span class=\"token string\">\"description\"</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"description\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> rows<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    data<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">:</span> faker<span class=\"token punctuation\">.</span>commerce<span class=\"token punctuation\">.</span><span class=\"token function\">productName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      price<span class=\"token punctuation\">:</span> faker<span class=\"token punctuation\">.</span>commerce<span class=\"token punctuation\">.</span><span class=\"token function\">price</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      categoryCode<span class=\"token punctuation\">:</span> faker<span class=\"token punctuation\">.</span>helpers<span class=\"token punctuation\">.</span><span class=\"token function\">arrayElement</span><span class=\"token punctuation\">(</span>categoryCodes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      description<span class=\"token punctuation\">:</span> faker<span class=\"token punctuation\">.</span>commerce<span class=\"token punctuation\">.</span><span class=\"token function\">productDescription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  csvWriter\n    <span class=\"token punctuation\">.</span><span class=\"token function\">writeRecords</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">CSV file generated successfully with </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>rows<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> rows</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> rows <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000000</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GENERATING CSV...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nrows<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">generateProductsCsv</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>File trÃªn lÃºc cháº¡y <code class=\"language-text\">node csv-generator.js</code> thÃ¬ sáº½ cÃ³ 6 file chá»©a tá»« 10, 100, 1000, 100k Ä‘áº¿n 1 triá»‡u record náº±m trong folder <code class=\"language-text\">bench/sample-csv</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e5673a41123c5f34bb792ee5510f914b/9cea8/terminal-run-generate-csv-sample.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA9hAAAPYQGoP6dpAAABqElEQVQoz33Q2W4bMQwF0PmWwuNZtFESKWobz8hLEi9I/v9vCsdAWvShwMF9uwTJTseHzZ+uftnyafPD5ocMNxluiq8zXUy6unKz+W7zHfJd8m3ED8F3GR+D++gAE+WzDavBamhRrmhXLBVLq/HrOPt+UP30tBvkbi/7UfaD3A2iH2U3CGAupW7WBe/ZGKcVWMxIjcOF/InwiGF1tBjMysVZ86T5ld08q8XszqxXUgc/L3Y4mF9kweJCsfl0cvEItNnQPDcfm3ZVQJKQBaRuGEXRuyObxrAxPEfA3mu1l6QMO8o2FQhZYzKUIWQBYRQ4yqeuH0R0+lhT9OC1RCO9HEFb5arSAW0CTAajtKxc1D4KEyZFL10/maVdS7vH9YapYdyIDxwb5wuG5mlz3zsb2r6tBv/odpOx5WzXm65XVc6qvAVcsy/JlYq1+JqoAi3GV+OrhDSp8ONZxrhh3CxVSwtgBazGl1H6UeLwSuFfR/6j6ydAXjE2jC2kI/JK+UjlPGvuhR8k7sX/ysaXEx3ecbnw+o71LZXzYXkLtIAOVjMAa5d/Pvx3+TdSnIXSWgDOjAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e5673a41123c5f34bb792ee5510f914b/c85cb/terminal-run-generate-csv-sample.webp 300w,\n/static/e5673a41123c5f34bb792ee5510f914b/e88ff/terminal-run-generate-csv-sample.webp 600w,\n/static/e5673a41123c5f34bb792ee5510f914b/92f8c/terminal-run-generate-csv-sample.webp 1200w,\n/static/e5673a41123c5f34bb792ee5510f914b/893d6/terminal-run-generate-csv-sample.webp 1278w\"\n              sizes=\"(max-width: 1200px) 100vw, 1200px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e5673a41123c5f34bb792ee5510f914b/5a46d/terminal-run-generate-csv-sample.png 300w,\n/static/e5673a41123c5f34bb792ee5510f914b/0a47e/terminal-run-generate-csv-sample.png 600w,\n/static/e5673a41123c5f34bb792ee5510f914b/c1b63/terminal-run-generate-csv-sample.png 1200w,\n/static/e5673a41123c5f34bb792ee5510f914b/9cea8/terminal-run-generate-csv-sample.png 1278w\"\n            sizes=\"(max-width: 1200px) 100vw, 1200px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e5673a41123c5f34bb792ee5510f914b/c1b63/terminal-run-generate-csv-sample.png\"\n            alt=\"terminal-run-generate-csv-sample.png\"\n            title=\"terminal-run-generate-csv-sample.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"tiáº¿n-hanh-benchmark\" style=\"position:relative;\"><a href=\"#ti%E1%BA%BFn-hanh-benchmark\" aria-label=\"tiáº¿n hanh benchmark permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tiáº¿n hÃ nh benchmark</h3>\n<h4 id=\"test-tren-trinh-duyá»‡t\" style=\"position:relative;\"><a href=\"#test-tren-trinh-duy%E1%BB%87t\" aria-label=\"test tren trinh duyá»‡t permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Test trÃªn trÃ¬nh duyá»‡t</h4>\n<p>MÃ¬nh tiáº¿n hÃ nh delete háº¿t báº£n ghi trong database vÃ  báº¯t Ä‘áº§u import láº¡i, vÃ¬ cÃ³ hÃ ng triá»‡u dÃ²ng trong database lÃ m áº£nh hÆ°á»Ÿng hiá»‡u nÄƒng lÃºc test.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3bb7535e71c25791843348d539c12f94/636d3/test-import-on-browser.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA9hAAAPYQGoP6dpAAABqUlEQVQoz3VRy24UQQyc/4UcQGIllNsec+PKr0BCEinfgEDsZrLRZHdm+jHtdrfb/Ro0u4lAglglq2S7VLbc1FrnlzhRA/PVbb25W3B5U79eP+PLt3p1Wz39mWz+Fpey5HZXP67L+qKuL/L783q2ms9W5e2qvPlQ3p3nUdT/i1+qVanucHjQeqBgcsZ5TqfmESefhTT/KBf/T5/D9R3Pc825lFzmV6Kx1gKAMcZ7j4gOwCj9Y0PdkyMiqQHRnWYAwAJMYEiq9P1XmGwDQuBR3ff9oe+fuq7b7Ya+a+837eN+8zgMQhozaa31pJVSatJGCrjfGSEbJaUUEhHRolZaCDGOC9r2QQyjNUZLpZUGA1oqdeQWrFBK66mJKTrncs4YPJWYYiql5JxrrTaSYjTJq2Ah0ylLAiwsvLElNCFwLiXFGFMiZiJi5hCYObrgPAeKEclRZCRPka13xlpOCRw22+0WwHoi771zbr/fI+IoRu/89udeK2AOiCiP10khxSgMGA4sjW76w4GIcs4pJWa21sYYnfcppW43oQ1LJ+flEc4DgHO+lJLSsutvZLBrSWLR0IUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/3bb7535e71c25791843348d539c12f94/c85cb/test-import-on-browser.webp 300w,\n/static/3bb7535e71c25791843348d539c12f94/e88ff/test-import-on-browser.webp 600w,\n/static/3bb7535e71c25791843348d539c12f94/92f8c/test-import-on-browser.webp 1200w,\n/static/3bb7535e71c25791843348d539c12f94/41bb6/test-import-on-browser.webp 1222w\"\n              sizes=\"(max-width: 1200px) 100vw, 1200px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/3bb7535e71c25791843348d539c12f94/5a46d/test-import-on-browser.png 300w,\n/static/3bb7535e71c25791843348d539c12f94/0a47e/test-import-on-browser.png 600w,\n/static/3bb7535e71c25791843348d539c12f94/c1b63/test-import-on-browser.png 1200w,\n/static/3bb7535e71c25791843348d539c12f94/636d3/test-import-on-browser.png 1222w\"\n            sizes=\"(max-width: 1200px) 100vw, 1200px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/3bb7535e71c25791843348d539c12f94/c1b63/test-import-on-browser.png\"\n            alt=\"test-import-on-browser.png\"\n            title=\"test-import-on-browser.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Káº¿t quáº£ theo thá»© tá»± cho import 10k dÃ²ng, 100k dÃ²ng vÃ  1triá»‡u dÃ²ng lÃ : 633ms, 4.74s vÃ  52.63s.</p>\n<p>Con sá»‘ khÃ¡ tá»‘t, khÃ´ng Ä‘áº¿n ná»—i nÃ o, vÃ¬ node vá»‘n dÄ© khÃ´ng máº¡nh vá» cÃ¡c tÃ¡c vá»¥ blocking IO nhÆ° viá»‡c transform nhá»¯ng file lá»›n nhÆ° váº­y. Pháº§n 2 cá»§a API nÃ y mÃ¬nh sáº½ cá»‘ gáº¯ng cáº£i thiá»‡n nÃ³.</p>\n<h4 id=\"stress-test\" style=\"position:relative;\"><a href=\"#stress-test\" aria-label=\"stress test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Stress test</h4>\n<p>Má»—i test váº­y thÃ´i thÃ¬ hÆ¡i buá»“n, mÃ¬nh cháº¡y stress test vá»›i sá»‘ lÆ°á»£ng file nhiá»u nhÆ°ng sá»‘ dÃ²ng Ã­t (1k-10k) xem thá»­ nÃ³ Ä‘Ã¡p á»©ng ra sao.</p>\n<p>MÃ¬nh gom láº¡i test case thÃ nh file benchmark <code class=\"language-text\">v1.bash</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n<span class=\"token builtin class-name\">set</span> -eu\n\n<span class=\"token comment\"># Get the directory of the script file</span>\n<span class=\"token assign-left variable\">SCRIPT_DIR</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">dirname</span> <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span>readlink -f <span class=\"token string\">\"<span class=\"token variable\">$0</span>\"</span><span class=\"token variable\">)</span></span>\"</span><span class=\"token variable\">)</span></span>\n\n<span class=\"token builtin class-name\">echo</span> -e <span class=\"token string\">\"<span class=\"token entity\" title=\"\\e\">\\e</span>[34mTEST 10s with 5 connections and csv file of 1000 rows<span class=\"token entity\" title=\"\\e\">\\e</span>[0m\"</span>\n\nautocannon http://localhost:8080/api/products/import -m POST <span class=\"token punctuation\">\\</span>\n  -F <span class=\"token string\">'{ \"file\": { \"type\": \"file\", \"path\": \"'</span><span class=\"token string\">\"<span class=\"token variable\">$SCRIPT_DIR</span>/sample-csv/products-1000-rows.csv\"</span><span class=\"token string\">'\" }}'</span> <span class=\"token punctuation\">\\</span>\n  --duration <span class=\"token number\">10</span> --connections <span class=\"token number\">5</span> <span class=\"token punctuation\">\\</span>\n  --maxOverallRequests <span class=\"token number\">10000</span>\n\n<span class=\"token builtin class-name\">echo</span> -e <span class=\"token string\">\"<span class=\"token entity\" title=\"\\e\">\\e</span>[34mTEST 10s with 5 connections and csv file of 10000 rows<span class=\"token entity\" title=\"\\e\">\\e</span>[0m\"</span>\n\nautocannon http://localhost:8080/api/products/import -m POST <span class=\"token punctuation\">\\</span>\n  -F <span class=\"token string\">'{ \"file\": { \"type\": \"file\", \"path\": \"'</span><span class=\"token string\">\"<span class=\"token variable\">$SCRIPT_DIR</span>/sample-csv/products-10000-rows.csv\"</span><span class=\"token string\">'\" }}'</span> <span class=\"token punctuation\">\\</span>\n  --duration <span class=\"token number\">10</span> --connections <span class=\"token number\">5</span> <span class=\"token punctuation\">\\</span>\n  --maxOverallRequests <span class=\"token number\">1000</span>\n\n<span class=\"token builtin class-name\">echo</span> -e <span class=\"token string\">\"<span class=\"token entity\" title=\"\\e\">\\e</span>[34mTEST 10s with 5 connections get Products<span class=\"token entity\" title=\"\\e\">\\e</span>[0m\"</span>\n\nautocannon http://localhost:8080/api/products -m GET <span class=\"token punctuation\">\\</span>\n  --duration <span class=\"token number\">10</span> --connections <span class=\"token number\">5</span> <span class=\"token punctuation\">\\</span>\n  --maxOverallRequests <span class=\"token number\">100000</span></code></pre></div>\n<p>Báº¡n cÃ³ thá»ƒ tháº¥y mÃ¬nh stress test 2 endpoint chÃ­nh.</p>\n<ul>\n<li><strong>Import product</strong>: MÃ¬nh test 2 trÆ°á»ng há»£p cháº¡y 10 giÃ¢y, 5 káº¿t ná»‘i Ä‘á»“ng thá»i:\n<ul>\n<li>TrÆ°á»ng há»£p Ä‘áº§u tiÃªn tá»‘i Ä‘a 10k request vá»›i nhá»¯ng file cÃ³ 1000 records.</li>\n<li>TrÆ°á»ng há»£p thá»© hai tá»‘i Ä‘a 1k request vá»›i nhá»¯ng file cÃ³ 10000 records.</li>\n</ul>\n</li>\n<li><strong>Get products</strong>: Endpoint nÃ y Ä‘á»ƒ stress test viá»‡c query liÃªn tá»¥c vÃ o database Ä‘á»ƒ láº¥y 200 product má»›i nháº¥t.</li>\n</ul>\n<p>Káº¿t quáº£ stress test chi tiáº¿t mÃ¬nh cÃ³ Ä‘á»ƒ á»Ÿ file readme, Ä‘Ã¢y lÃ  tÃ³m táº¯t káº¿t quáº£ sau 10 giÃ¢y cháº¡y cho má»—i test:</p>\n<p>Test case thá»© nháº¥t import má»™t tÃ¡ file 1000 dÃ²ng: <strong>262</strong> request</p>\n<p>Test case thá»© 2, import nhiá»u file 10k dÃ²ng: <strong>35</strong> request</p>\n<p>Test case sá»‘ 3, GET 200 products liÃªn tá»¥c: <strong>1k</strong> request.</p>\n<h2 id=\"káº¿t-luáº­n\" style=\"position:relative;\"><a href=\"#k%E1%BA%BFt-lu%E1%BA%ADn\" aria-label=\"káº¿t luáº­n permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Káº¿t luáº­n</h2>\n<p>Dáº¡o nÃ y mÃ¬nh viáº¿t bÃ i nÃ o cÅ©ng dÃ i tháº­t, hi vá»ng bÃ i nÃ y cÃ³ Ã­ch vá»›i cÃ¡c báº¡n trong khi tham kháº£o 1 API Ä‘á»ƒ import CSV Ä‘Æ¡n giáº£n nhanh gá»n.</p>\n<p>CÃ¡c con sá»‘ káº¿t quáº£ stress test lÃ m mÃ¬nh khÃ¡ ngáº¡c nhiÃªn, vÃ¬ khi code Go nhÆ° bÃ i viáº¿t connection pooling<sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup>, nhá»¯ng con sá»‘ benchmark áº¥n tÆ°á»£ng hÆ¡n ráº¥t nhiá»u.</p>\n<p>NhÆ°ng cÅ©ng pháº£i thÃ´i, vÃ¬ mÃ¬nh cÃ³ dÃ¹ng ORM, láº¡i chÆ°a ká»ƒ Nodejs khÃ´ng máº¡nh vá» máº¥y cÃ¡i blocking-IO, cho nÃªn con sá»‘ nÃ y cháº¥p nháº­n Ä‘Æ°á»£c.</p>\n<p>Tháº¿ má»›i cÃ³ lÃ½ do mÃ¬nh viáº¿t tiáº¿p pháº§n 2 chá»©, Ä‘Ã³n Ä‘á»c hen!</p>\n<p>á» trÃªn repo thÃ¬ cÃ¡c báº¡n cÃ³ thá»ƒ kiá»ƒm tra code cá»§a bÃ i nÃ y trong branch v1 nhÃ©, lá»¡ Ä‘Ã¢u branch main mÃ¬nh update version 2 rá»“i.</p>\n<p>Happy coding!</p>\n\n      <div class=\"footnotes\">\n        <hr/><strong>References:</strong>\n        <ol >\n    \n    <li class=\"footnote-list-item\" id=\"fn-1\" >\n          \n        \n      <a href=\"#fnref-1\" class=\"footnote-backref\" style=\"display:inline;text-decoration: none;\">\n        â†©\n      </a>\n    <p class=\"footnote-paragraph\" style=\"display:inline; margin-left: 5px;\"><a href=\"https://reflectoring.io/node-csv-importer/\">https://reflectoring.io/node-csv-importer/</a></p>\n      </li>\n      \n    \n\n    <li class=\"footnote-list-item\" id=\"fn-2\" >\n          \n        \n      <a href=\"#fnref-2\" class=\"footnote-backref\" style=\"display:inline;text-decoration: none;\">\n        â†©\n      </a>\n    <p class=\"footnote-paragraph\" style=\"display:inline; margin-left: 5px;\"><a href=\"https://github.com/kienmatu/nodejs-product-csv\">https://github.com/kienmatu/nodejs-product-csv</a></p>\n      </li>\n      \n    \n\n    <li class=\"footnote-list-item\" id=\"fn-3\" >\n          \n        \n      <a href=\"#fnref-3\" class=\"footnote-backref\" style=\"display:inline;text-decoration: none;\">\n        â†©\n      </a>\n    <p class=\"footnote-paragraph\" style=\"display:inline; margin-left: 5px;\"><a href=\"https://devgiangho.github.io/connection-pooling-tong-quan-va-implement-benchmark/\">https://devgiangho.github.io/connection-pooling-tong-quan-va-implement-benchmark/</a></p>\n      </li>\n      \n    \n\n    <li class=\"footnote-list-item\" id=\"fn-4\" >\n          \n        \n      <a href=\"#fnref-4\" class=\"footnote-backref\" style=\"display:inline;text-decoration: none;\">\n        â†©\n      </a>\n    <p class=\"footnote-paragraph\" style=\"display:inline; margin-left: 5px;\"><a href=\"https://nodejs.org/api/process.html#process_process_hrtime_time\">https://nodejs.org/api/process.html#process_process_hrtime_time</a></p>\n      </li>\n      \n    </ol></div>"},"primaryTag":null,"prev":{"frontmatter":{"title":"Slice trong Go: Táº¥t táº§n táº­t, vÃ  nhá»¯ng Ä‘iá»u cÃ³ thá»ƒ báº¡n chÆ°a biáº¿t","path":"/golang-slice-tat-tan-tat-va-nhung-dieu-co-the-ban-chua-biet"}},"next":null},"pageContext":{"postId":"ca508b3b-4dc2-58ad-b135-ab0d8ed74ccb","primaryTag":"Nodejs","prevId":"17142bbc-a516-53d9-b85e-bb84d04661a3","nextId":null}},"staticQueryHashes":["2275848304","3082461530","3837502023","4133584024","545095672"]}