<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.302460ce1a093cdb4f96.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 4.0.1"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-149502908-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-149502908-1', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><title data-react-helmet="true">Authentication với JWT, lưu token ở đâu là bảo mật nhất? - Dev Giang Hồ - Blog for Devs</title><meta data-react-helmet="true" name="description" content="JWT luôn là một phương pháp phổ biến trong việc authenticate user cho các ứng dụng web. Nhưng câu hỏi đặt ra là, chúng ta nên lưu JWT token ở đâu? Ưu nhược điểm của từng nơi lưu như thế nào? Làm cách nào để chúng ta cải thiện nó?"/><meta data-react-helmet="true" name="og:title" content="Authentication với JWT, lưu token ở đâu là bảo mật nhất? - Dev Giang Hồ - Blog for Devs"/><meta data-react-helmet="true" name="og:type" content="website"/><meta data-react-helmet="true" name="og:description" content="JWT luôn là một phương pháp phổ biến trong việc authenticate user cho các ứng dụng web. Nhưng câu hỏi đặt ra là, chúng ta nên lưu JWT token ở đâu? Ưu nhược điểm của từng nơi lưu như thế nào? Làm cách nào để chúng ta cải thiện nó?"/><meta data-react-helmet="true" name="og:url" content="https://devgiangho.github.io/authentication-voi-jwt-luu-token-o-dau-la-bao-mat-nhat"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:data1" content="Kiên Đinh"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Kiên Đinh"/><meta data-react-helmet="true" name="twitter:title" content="Authentication với JWT, lưu token ở đâu là bảo mật nhất? - Dev Giang Hồ - Blog for Devs"/><meta data-react-helmet="true" name="twitter:description" content="JWT luôn là một phương pháp phổ biến trong việc authenticate user cho các ứng dụng web. Nhưng câu hỏi đặt ra là, chúng ta nên lưu JWT token ở đâu? Ưu nhược điểm của từng nơi lưu như thế nào? Làm cách nào để chúng ta cải thiện nó?"/><meta data-react-helmet="true" name="keywords" content="JavaScript, .NET, Go, NodeJs, Vạn Vật, Web, Go"/><meta data-react-helmet="true" name="article:published_time" content="2023-03-18T05:04:51.904Z"/><meta data-react-helmet="true" name="article:modified_time" content="2023-03-18T05:04:51.904Z"/><meta data-react-helmet="true" name="twitter:label2" content="Filed under"/><meta data-react-helmet="true" name="twitter:data2" content="Web"/><meta data-react-helmet="true" name="og:image" content="https://devgiangho.github.io//static/83b91a075fc38ba8b17bfcd6a0e410a0/4ecb5/JWT-authentication.png"/><meta data-react-helmet="true" name="twitter:image" content="https://devgiangho.github.io//static/83b91a075fc38ba8b17bfcd6a0e410a0/4ecb5/JWT-authentication.png"/><script data-react-helmet="true" type="application/ld+json">
        {
          "@context": "https://schema.org/",
          "@type": "Article",
          "author": {
            "@type": "Person",
            "name": "Kiên Đinh"
          },
          "keywords": "Web, Go",
          "headline": "Authentication với JWT, lưu token ở đâu là bảo mật nhất? - Dev Giang Hồ - Blog for Devs",
          "url": "https://devgiangho.github.io/authentication-voi-jwt-luu-token-o-dau-la-bao-mat-nhat",
          "datePublished": "2023-03-18T05:04:51.904Z",
          "datePublished": "2023-03-18T05:04:51.904Z",
          "image": {
            "@type": "ImageObject",
            "url": "https://devgiangho.github.io//static/83b91a075fc38ba8b17bfcd6a0e410a0/4ecb5/JWT-authentication.png",
            "width": "1000",
            "height": "520"
          },
          "publisher": {
            "@type": "Organization",
            "name": "Dev Giang Hồ - Blog for Devs"
          },
          "description": "JWT luôn là một phương pháp phổ biến trong việc authenticate user cho các ứng dụng web. Nhưng câu hỏi đặt ra là, chúng ta nên lưu JWT token ở đâu? Ưu nhược điểm của từng nơi lưu như thế nào? Làm cách nào để chúng ta cải thiện nó?",
          "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://devgiangho.github.io"
          }
        }
      </script><style data-styled="" data-styled-version="5.3.3">html{line-height:1.15;-webkit-text-size-adjust:100%;}/*!sc*/
body{margin:0;}/*!sc*/
main{display:block;}/*!sc*/
h1{font-size:2em;margin:0.67em 0;}/*!sc*/
hr{box-sizing:content-box;height:0;overflow:visible;}/*!sc*/
pre{font-family:monospace,monospace;font-size:1em;}/*!sc*/
a{background-color:transparent;}/*!sc*/
abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}/*!sc*/
b,strong{font-weight:bolder;}/*!sc*/
code,kbd,samp{font-family:monospace,monospace;font-size:1em;}/*!sc*/
small{font-size:80%;}/*!sc*/
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}/*!sc*/
sub{bottom:-0.25em;}/*!sc*/
sup{top:-0.5em;}/*!sc*/
img{border-style:none;}/*!sc*/
button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}/*!sc*/
button,input{overflow:visible;}/*!sc*/
button,select{text-transform:none;}/*!sc*/
button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;}/*!sc*/
button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}/*!sc*/
button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}/*!sc*/
fieldset{padding:0.35em 0.75em 0.625em;}/*!sc*/
legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}/*!sc*/
progress{vertical-align:baseline;}/*!sc*/
textarea{overflow:auto;}/*!sc*/
[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}/*!sc*/
[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}/*!sc*/
[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}/*!sc*/
[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}/*!sc*/
::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}/*!sc*/
details{display:block;}/*!sc*/
summary{display:list-item;}/*!sc*/
template{display:none;}/*!sc*/
[hidden]{display:none;}/*!sc*/
html{box-sizing:border-box;background-color:#fafafa;}/*!sc*/
body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;line-height:1.9em;}/*!sc*/
*{box-sizing:border-box;}/*!sc*/
h1,h2,h3,h4,h5,h6{outline:none;}/*!sc*/
a{color:#000;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.gatsby-highlight{max-width:100% !important;}/*!sc*/
.gatsby-highlight-code-line{background-color:#353631;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:0.75em;}/*!sc*/
.interactive-gif .embedded{position:relative;width:100%;height:auto;}/*!sc*/
.interactive-gif .loading,.interactive-gif .still-container,.interactive-gif .gif-container{position:absolute;top:0;width:100%;height:100%;}/*!sc*/
.interactive-gif .still,.interactive-gif .gif{width:100%;height:100%;cursor:pointer;}/*!sc*/
.interactive-gif .loading .indicator{position:absolute;bottom:0;left:0;width:80px;-webkit-filter:contrast(0.5);filter:contrast(0.5);}/*!sc*/
.interactive-gif .still-container .play{cursor:pointer;-webkit-filter:grayscale(100%);filter:grayscale(100%);width:20%;position:absolute;opacity:0.9;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);}/*!sc*/
.interactive-gif .caption{font-size:90%;font-style:italic;}/*!sc*/
.interactive-gif .placeholder{-webkit-filter:grayscale(100%);filter:grayscale(100%);text-align:center;}/*!sc*/
.interactive-gif .placeholder img{width:200px;display:none;}/*!sc*/
article code:not(pre > code){border:0.1rem solid rgba(0,0,0,0.1);font-weight:300;border-radius:0.25rem;background-color:rgb(245 245 245) !important;text-shadow:none !important;padding-top:0.2rem !important;padding-bottom:0.1rem !important;padding-left:0.125rem !important;padding-right:0.125rem !important;color:rgb(11 11 11) !important;}/*!sc*/
data-styled.g2[id="sc-global-jZDdyM1"]{content:"sc-global-jZDdyM1,"}/*!sc*/
.hhzXsP{width:1260px;margin-left:auto;margin-right:auto;max-width:100%;}/*!sc*/
@media (max-width:1300px){.hhzXsP{padding:0 20px;}}/*!sc*/
data-styled.g3[id="common__Container-sc-yvdkhc-0"]{content:"hhzXsP,"}/*!sc*/
.eBjOxQ{z-index:1000;background-color:#20232a;position:-webkit-sticky;position:sticky;top:0;box-shadow:0 0 3px rgba(0,0,0,.03),0 3px 46px rgba(0,0,0,.07);}/*!sc*/
data-styled.g5[id="style__NavContainer-sc-jhe81k-0"]{content:"eBjOxQ,"}/*!sc*/
.hRmTxB{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;}/*!sc*/
data-styled.g6[id="style__Nav-sc-jhe81k-1"]{content:"hRmTxB,"}/*!sc*/
.kkNwJo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;height:70px;white-space:nowrap;}/*!sc*/
@media (max-width:576px){.kkNwJo{width:90%;}}/*!sc*/
data-styled.g7[id="style__NavWrapper-sc-jhe81k-2"]{content:"kkNwJo,"}/*!sc*/
.cPsfUr{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;list-style-type:none;margin:0;padding:0;}/*!sc*/
@media (max-width:576px){.cPsfUr{width:80%;overflow-x:auto;overflow-y:hidden;-webkit-mask-image:linear-gradient(to right,transparent,#000 25px,#000 90%,transparent);mask-image:linear-gradient(to right,transparent,#000 25px,#000 90%,transparent);}}/*!sc*/
.jPyOnZ{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;list-style-type:none;margin:0;padding:0;}/*!sc*/
data-styled.g8[id="style__NavMenu-sc-jhe81k-3"]{content:"cPsfUr,jPyOnZ,"}/*!sc*/
.fPrbPq{cursor:pointer;display:inline-block;border:0;background:transparent;outline:none;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g9[id="style__NavMenuItem-sc-jhe81k-4"]{content:"fPrbPq,"}/*!sc*/
.bdMJer{color:#fff;opacity:.8;padding:16px;-webkit-transition:opacity .5s;transition:opacity .5s;}/*!sc*/
.bdMJer:hover{opacity:1;}/*!sc*/
data-styled.g10[id="style__NavLink-sc-jhe81k-5"]{content:"bdMJer,"}/*!sc*/
.dSpRmA{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;position:relative;}/*!sc*/
data-styled.g11[id="style__SearchContainer-sc-jhe81k-6"]{content:"dSpRmA,"}/*!sc*/
.cbBsOC{cursor:pointer;color:#fff;opacity:.8;background:none;outline:none;border:0;-webkit-transition:opacity .5s;transition:opacity .5s;}/*!sc*/
.cbBsOC:hover{opacity:1;}/*!sc*/
data-styled.g12[id="style__ToggleSearchButton-sc-jhe81k-7"]{content:"cbBsOC,"}/*!sc*/
.jIujQe{max-height:30px;width:30px;margin-right:45px;}/*!sc*/
@media (max-width:576px){.jIujQe{margin-right:15px;}}/*!sc*/
data-styled.g20[id="logo__LogoImage-sc-1ta2zdq-0"]{content:"jIujQe,"}/*!sc*/
.dYGSok{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;height:30px;}/*!sc*/
data-styled.g21[id="logo__HomeLink-sc-1ta2zdq-1"]{content:"dYGSok,"}/*!sc*/
.hNmZFn{max-width:100%;padding:10px 0;z-index:700;position:relative;font-size:.9em;margin-top:50px;}/*!sc*/
data-styled.g27[id="style__StyledFooter-sc-1bbyksd-0"]{content:"hNmZFn,"}/*!sc*/
.kRFmqs{text-align:right;line-height:1.1em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
data-styled.g28[id="style__FooterContainer-sc-1bbyksd-1"]{content:"kRFmqs,"}/*!sc*/
.eFaQjI{margin:0;}/*!sc*/
data-styled.g29[id="style__Copyright-sc-1bbyksd-2"]{content:"eFaQjI,"}/*!sc*/
.hFClol{margin:0;opacity:.8;font-size:.8em;}/*!sc*/
.hFClol a{font-weight:bold;-webkit-text-decoration:none;text-decoration:none;color:#000;}/*!sc*/
.hFClol a:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g30[id="style__DesignBy-sc-1bbyksd-3"]{content:"hFClol,"}/*!sc*/
.hCiwIZ ul{list-style-type:none;margin:0;padding:0;}/*!sc*/
.hCiwIZ li{display:inline-block;margin-right:25px;}/*!sc*/
.hCiwIZ li:last-child{margin-right:0;}/*!sc*/
data-styled.g31[id="style__StyledNav-sc-1bbyksd-4"]{content:"hCiwIZ,"}/*!sc*/
.RdnGO{color:#000;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g33[id="style__FooterMenuLink-sc-1bbyksd-6"]{content:"RdnGO,"}/*!sc*/
.fZaPhp .toc-list{list-style-type:none;margin:0;padding:0;}/*!sc*/
.fZaPhp .toc-list .toc-list{padding-left:17px;padding-top:10px;}/*!sc*/
.fZaPhp .toc-list-item{line-height:1.2em;padding-bottom:10px;}/*!sc*/
.fZaPhp .toc-list-item:last-child{padding-bottom:0;}/*!sc*/
.fZaPhp .toc-link{color:#808080;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.fZaPhp .is-active-link{color:#404040;font-weight:700;}/*!sc*/
data-styled.g34[id="toc__StyledNav-sc-1rcn1mg-0"]{content:"fZaPhp,"}/*!sc*/
.eQlUnY{position:-webkit-sticky;position:sticky;height:5px;top:70px;background-color:#007acc;z-index:500;}/*!sc*/
data-styled.g35[id="reading-progress__ReadingProgressBar-sc-1h92jbi-0"]{content:"eQlUnY,"}/*!sc*/
.eWZpEr{list-style-type:none;margin:0;padding:0;}/*!sc*/
data-styled.g36[id="social-channel-list__StyledSocialChannels-sc-hb4cd6-0"]{content:"eWZpEr,"}/*!sc*/
.dIYGZM{display:inline-block;margin:0 10px;font-size:1.6em;opacity:.7;-webkit-transition:opacity .5s;transition:opacity .5s;}/*!sc*/
.dIYGZM:hover{opacity:1;}/*!sc*/
data-styled.g37[id="social-channel-list__StyledSocialChannel-sc-hb4cd6-1"]{content:"dIYGZM,"}/*!sc*/
.fYracG{max-width:55px;border-radius:100%;}/*!sc*/
data-styled.g38[id="avatar__StyledAvatar-sc-1b55w7o-0"]{content:"fYracG,"}/*!sc*/
.buiIfq{margin:auto;text-align:center;width:100%;}/*!sc*/
data-styled.g39[id="bio__StyledBio-sc-cy4lz8-0"]{content:"buiIfq,"}/*!sc*/
.iEPaOA{margin:10px 0 13px;}/*!sc*/
.iEPaOA a{color:#000;-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g40[id="bio__AuthorDescription-sc-cy4lz8-1"]{content:"iEPaOA,"}/*!sc*/
.HeSmV{margin:10px;}/*!sc*/
data-styled.g41[id="bio__AuthorName-sc-cy4lz8-2"]{content:"HeSmV,"}/*!sc*/
.gRnocR{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:0 !important;}/*!sc*/
data-styled.g42[id="post__PostContainer-sc-14ootra-0"]{content:"gRnocR,"}/*!sc*/
.hEpQVI{min-width:255px;max-width:225px;-webkit-transition:opacity 0.5s;transition:opacity 0.5s;}/*!sc*/
@media (max-width:1300px){.hEpQVI{position:fixed;display:none;z-index:1000;background-color:#fff;width:100% !important;max-width:100%;padding:0 20px;margin-top:-5px;height:calc(100vh - 70px);}}/*!sc*/
data-styled.g43[id="post__LeftSidebar-sc-14ootra-1"]{content:"hEpQVI,"}/*!sc*/
.fPjcPL{margin-top:-5px;border-right:1px #e5eff5 solid;border-left:1px #e5eff5 solid;background-color:#fff;box-shadow:0 0 3px rgba(0,0,0,0.03),0 3px 46px rgba(0,0,0,0.1);z-index:10;width:1035px;max-width:100%;}/*!sc*/
.fPjcPL li > a,.fPjcPL p > a{color:#0054aa;border-bottom:2px #0054aa solid;overflow-wrap:break-word;}/*!sc*/
.fPjcPL pre{margin:30px 0;}/*!sc*/
.fPjcPL blockquote{border-left:4px #a4cbb8 solid;background-color:#fafafa;margin:30px 0;padding:5px 20px;border-radius:0.3em;}/*!sc*/
.fPjcPL h1,.fPjcPL h2,.fPjcPL h3,.fPjcPL h4,.fPjcPL h5,.fPjcPL h6{-webkit-scroll-margin-top:20px;-moz-scroll-margin-top:20px;-ms-scroll-margin-top:20px;scroll-margin-top:20px;}/*!sc*/
.fPjcPL h3::before,.fPjcPL h4::before,.fPjcPL h5::before,.fPjcPL h6::before{display:block;content:" ";visibility:hidden;}/*!sc*/
.fPjcPL h2{border-top:1px solid #ececec;margin-top:44px;padding-top:15px;line-height:1.2;}/*!sc*/
.fPjcPL h2 .anchor.before{padding-top:10px;}/*!sc*/
.fPjcPL code[class*="language-text"]{padding:5px;}/*!sc*/
.fPjcPL p > img{max-width:100%;border-radius:0.3em;margin:30px 0;}/*!sc*/
.fPjcPL hr{border-top:1px solid #ececec;border-bottom:0;margin-top:44px;margin-bottom:40px;}/*!sc*/
.fPjcPL .gatsby-resp-image-link{margin:30px 0;max-width:100%;}/*!sc*/
.fPjcPL .gatsby-resp-image-link .gatsby-resp-image-image{border-radius:0.3em;}/*!sc*/
.fPjcPL table{margin:0 auto;}/*!sc*/
.fPjcPL table{color:#333;background:white;border:1px solid grey;font-size:12pt;border-collapse:collapse;}/*!sc*/
.fPjcPL table thead th,.fPjcPL table tfoot th{color:#474747;background:rgb(102 102 102 / 10%);}/*!sc*/
.fPjcPL table caption{padding:.5em;}/*!sc*/
.fPjcPL table th,.fPjcPL table td{padding:.5em;border:1px solid lightgrey;}/*!sc*/
.fPjcPL [data-table-theme*=zebra] tbody tr:nth-of-type(odd){background:rgba(0,0,0,.05);}/*!sc*/
.fPjcPL [data-table-theme*=zebra][data-table-theme*=dark] tbody tr:nth-of-type(odd){background:rgba(255,255,255,.05);}/*!sc*/
.fPjcPL [data-table-theme*=dark]{color:#ddd;background:#333;font-size:12pt;border-collapse:collapse;}/*!sc*/
.fPjcPL [data-table-theme*=dark] thead th,.fPjcPL [data-table-theme*=dark] tfoot th{color:#aaa;background:rgba(0255,255,255,.15);}/*!sc*/
.fPjcPL [data-table-theme*=dark] caption{padding:.5em;}/*!sc*/
.fPjcPL [data-table-theme*=dark] th,.fPjcPL [data-table-theme*=dark] td{padding:.5em;border:1px solid grey;}/*!sc*/
data-styled.g44[id="post__PostContent-sc-14ootra-2"]{content:"fPjcPL,"}/*!sc*/
.iHFeMU{position:-webkit-sticky;position:sticky;top:70px;padding:40px 30px 40px 0;}/*!sc*/
data-styled.g45[id="post__TocWrapper-sc-14ootra-3"]{content:"iHFeMU,"}/*!sc*/
.eovFiO{padding:40px;}/*!sc*/
@media (max-width:576px){.eovFiO{padding:20px;}}/*!sc*/
data-styled.g46[id="post__PostHeader-sc-14ootra-4"]{content:"eovFiO,"}/*!sc*/
.gtCJo{border-radius:0;}/*!sc*/
@media (max-width:1300px){.gtCJo{margin-left:-1px;margin-right:-1px;}}/*!sc*/
data-styled.g47[id="post__FeaturedImage-sc-14ootra-5"]{content:"gtCJo,"}/*!sc*/
.gjEQdA{padding:40px;}/*!sc*/
@media (max-width:576px){.gjEQdA{padding:20px;}}/*!sc*/
data-styled.g48[id="post__StyledPost-sc-14ootra-6"]{content:"gjEQdA,"}/*!sc*/
.ijuirw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;opacity:0.8;font-size:0.9em;}/*!sc*/
data-styled.g49[id="post__PostMeta-sc-14ootra-7"]{content:"ijuirw,"}/*!sc*/
.jpqqca{margin:0;padding:0;line-height:1.2;}/*!sc*/
data-styled.g50[id="post__PostTitle-sc-14ootra-8"]{content:"jpqqca,"}/*!sc*/
.kvgTmP{background-color:#fafafa;font-size:0.8em;color:#666;padding:40px;line-height:1em;}/*!sc*/
.kvgTmP p{margin:5px 0;}/*!sc*/
data-styled.g51[id="post__PostFooter-sc-14ootra-9"]{content:"kvgTmP,"}/*!sc*/
.gdsQai{color:#000 !important;-webkit-text-decoration:none;text-decoration:none;border-bottom:0 !important;}/*!sc*/
data-styled.g52[id="post__FooterTagLink-sc-14ootra-10"]{content:"gdsQai,"}/*!sc*/
.ddTKRo{background-color:#fff;border-top:1px #e5eff5 solid;border-bottom:1px #e5eff5 solid;z-index:700;position:relative;padding:40px;}/*!sc*/
data-styled.g53[id="post__PostAddition-sc-14ootra-11"]{content:"ddTKRo,"}/*!sc*/
.jxyEbH{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
data-styled.g54[id="post__PostAdditionContent-sc-14ootra-12"]{content:"jxyEbH,"}/*!sc*/
.dMBYdG{width:50%;margin:auto;}/*!sc*/
@media (max-width:576px){.dMBYdG{width:100%;}}/*!sc*/
data-styled.g55[id="post__BioWrapper-sc-14ootra-13"]{content:"dMBYdG,"}/*!sc*/
.Bwnup{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-top:1em;position:fixed;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;right:20px;bottom:20px;border-radius:100%;box-shadow:0 0 3px rgba(0,0,0,0.03),0 3px 46px rgba(0,0,0,0.1);border:0;z-index:5000;width:50px;height:50px;background-color:#20232a;color:#fff;outline:none;}/*!sc*/
@media (min-width:1300px){.Bwnup{display:none;}}/*!sc*/
data-styled.g56[id="post__ToggleTocButton-sc-14ootra-14"]{content:"Bwnup,"}/*!sc*/
</style><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=7e55704418c2d530fda33cc8a39a3395" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#a4cbb8"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=7e55704418c2d530fda33cc8a39a3395"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=7e55704418c2d530fda33cc8a39a3395"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=7e55704418c2d530fda33cc8a39a3395"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=7e55704418c2d530fda33cc8a39a3395"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=7e55704418c2d530fda33cc8a39a3395"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=7e55704418c2d530fda33cc8a39a3395"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=7e55704418c2d530fda33cc8a39a3395"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=7e55704418c2d530fda33cc8a39a3395"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 100)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-8e5d3fd77330e7347cae.js"/><link as="script" rel="preload" href="/framework-38de9ebdaf5cd0003079.js"/><link as="script" rel="preload" href="/app-1b32501acd7206214859.js"/><link as="script" rel="preload" href="/1bfc9850-f1b2044ff811313c5a48.js"/><link as="script" rel="preload" href="/commons-9754e5915e5f58c0d66e.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-0046fe43ee7790d25f58.js"/><link as="fetch" rel="preload" href="/page-data/authentication-voi-jwt-luu-token-o-dau-la-bao-mat-nhat/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1116962356.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2275848304.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3082461530.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3089453468.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/545095672.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="style__NavContainer-sc-jhe81k-0 eBjOxQ"><div class="common__Container-sc-yvdkhc-0 style__Nav-sc-jhe81k-1 hhzXsP hRmTxB"><a class="logo__HomeLink-sc-1ta2zdq-1 dYGSok" href="/"><div class="logo__LogoImage-sc-1ta2zdq-0 jIujQe gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:30px;height:30px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEz0lEQVQ4ywHEBDv7ANXT1Lq4ucG/wMzKzNHP0dPR0tTS09nX2N3b3N7c3eLg4OPh4vLw8HJxd0BDSVxfY6Glo5KYlpGVlJaamQDPzc6+vL3Fw8TS0NHZ19jb2dre3Nzi4ODl4uTn5ebg3t/NzM7m5eZhYGdBRElbXmKQl5SNlJKWm5qTl5YAyMbHurm5w8HCzcvMwcDCy8rLz87O1dTU2tjY09LTe32BS0tSYWBnMzI6MDI4YmZok5iXkJSUmJybkZaUAMG/wLKysr6+vsXDxKCiori3uLa1t7y7vby9vLa4t1JVWgsLFAsKEg4OFg0NFT0/RY6Tk5yfnqGiopygnwC0srOkpqStr666urq1trXAv7/AwMDCwsLEw8PKycmpqqtGSlATFBwSExkQEBYLDBJdYWSkqKago6KfoqEAyMfHqqurubi4vr2+vLy8t7i4u7u7urq6rKytx8XGpqmnc31+JSgvDAwSERIXBwgONzo9oKWjqampsrKxANPS0rq5ucbFxcbExcTCwsG/v8XDxMTCwqysrqytr32Cg1NdYC4xORAQGBESFwgIDi8yNpSZmKepp4SIiAC6urupqqqxsrG3t7a1tbO9vLzBvsDTz9CXm5ygoaNlamw9RUgmKTEREhoQERYDBAlDR0qVnJqVmplrbnEAZmxuXmVoV15hcXd6hIeJhIiKf4KDmpudh4yNlpqZeH+AQUhNIygwKCsyEhMYJCcrbnR1iI+MjZORlJiXAH2EhXmBgWdwcamurre4uJudnZaZmampqoSKi3aAgF1maENKUEtSV1ddYCQkLH+EhYqQj5OYlYSKinyDgwCCi4l4gYCKkJDT0dKqrKueoKGhoqO0trWHjY1SW15ES1E9REs4PkRFSU0zNT6gpaSbn56eoJ+PlJOEi4kAhYuLfoWFt7q50s/QrKyteX+AeH1+jpKTZ2tvXWVoQEdNNDpBNDlAZWltSUxSnKCfo6WkqaqppaemnqGgAKipqYOGh6uqrtHP0KWmpYOIiIaLioqPkF5jZkVMUURKUSAjLVBVV3d/gHyBgZ+ioaurq6urq62traGjowB/gIQGCROcnaDKycqMkJF8gIOTmJeDh4ZscXI6QUkwNj9ESE6cnZ2BhYd2fX6YnZu3trevr6+xsbG2trYAIiUtGhsju7q929jZnJ6eam5xhIeHpqimhouKXGFkYmZsf4KFh4qLfoaGXGRnbXF1m56dlJeXpKSmr6+vAAYHEklJT87Mzr+9vZ+ioGxydGFlaZKWloKGhoCEhJOXl3V8fXaAgHd/f1piZiMoMSUqMSswODU6Qjk+RQAGBhB2dXzi4OCsrKyCiopSXF9ka25xd3lscHVxd3hwdnZpcHFtd3deZmlNVFoxNT4sLzkrMDgsMDkrMToAEREYi4qN3Nraq6ysfYSER05UR0xTYGhrY2ttWmFkU1pdUVpcNjtCMDc9MTU8LTE7MTU+NDlCNjtEO0FJADY2PKKjpLW1trm6uX+FhTg+RSwxOz1ES0RLUEpSV0ZOUzQ5QD1ASIWHind5fVFUWjI3PzI3QEROUjtDSABlZWnR0NGNkJKxsbKvsLCNkZBna245PkQ1OUI3PEMjJi8dHSRxcnbT0tPb2drRz9DMy83Hxce7vLyTl5hH1mZLeDDpeAAAAABJRU5ErkJggg==" alt="Dev Giang Hồ - Blog for Devs" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/7e55704418c2d530fda33cc8a39a3395/91664/logo.png 1x,
/static/7e55704418c2d530fda33cc8a39a3395/ad39b/logo.png 1.5x,
/static/7e55704418c2d530fda33cc8a39a3395/183c2/logo.png 2x" /><img loading="lazy" width="30" height="30" srcset="/static/7e55704418c2d530fda33cc8a39a3395/91664/logo.png 1x,
/static/7e55704418c2d530fda33cc8a39a3395/ad39b/logo.png 1.5x,
/static/7e55704418c2d530fda33cc8a39a3395/183c2/logo.png 2x" src="/static/7e55704418c2d530fda33cc8a39a3395/91664/logo.png" alt="Dev Giang Hồ - Blog for Devs" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a><div class="style__NavWrapper-sc-jhe81k-2 kkNwJo"><ul class="style__NavMenu-sc-jhe81k-3 cPsfUr"><li class="style__NavMenuItem-sc-jhe81k-4 fPrbPq"><a class="style__NavLink-sc-jhe81k-5 bdMJer" href="/">Home</a></li><li class="style__NavMenuItem-sc-jhe81k-4 fPrbPq"><a class="style__NavLink-sc-jhe81k-5 bdMJer" href="/about-me">About me</a></li></ul><div class="style__SearchContainer-sc-jhe81k-6 dSpRmA"><ul class="style__NavMenu-sc-jhe81k-3 jPyOnZ"><li class="style__NavMenuItem-sc-jhe81k-4 fPrbPq"><button role="button" aria-label="Toggle search" class="style__ToggleSearchButton-sc-jhe81k-7 cbBsOC"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg></button></li></ul></div></div></div></div><main><div style="width:0%" color="#007acc" class="reading-progress__ReadingProgressBar-sc-1h92jbi-0 eQlUnY"></div><div class="common__Container-sc-yvdkhc-0 post__PostContainer-sc-14ootra-0 hhzXsP gRnocR"><div class="post__LeftSidebar-sc-14ootra-1 hEpQVI"><div class="post__TocWrapper-sc-14ootra-3 iHFeMU"><nav class="toc__StyledNav-sc-1rcn1mg-0 fZaPhp toc"></nav></div></div><button role="button" aria-label="Toggle table of contents" class="post__ToggleTocButton-sc-14ootra-14 Bwnup"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M432 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-128H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-128H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-128H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"></path></svg></button><div class="post__PostContent-sc-14ootra-2 fPjcPL"><article class="post"><header class="post__PostHeader-sc-14ootra-4 eovFiO"><section class="post__PostMeta-sc-14ootra-7 ijuirw"><a href="/tag/web">Web</a><time dateTime="2023-03-18T05:04:51.904Z">18 March, 2023</time></section><h1 class="post__PostTitle-sc-14ootra-8 jpqqca">Authentication với JWT, lưu token ở đâu là bảo mật nhất?</h1></header><div class="post__FeaturedImage-sc-14ootra-5 gtCJo gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:73%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEJUlEQVQ4yy2UW0yTBwCF/7e9Lll2yczidGTODeO8IDExCJsKboiAyFRARCd3CrRSqNwEC+U2SkHKzRYoCghIgVnoRUoLLS2F1hYQnc4H3bIlS3bP9vot6J7O28l5+M4nHLLJCLeXcnShkuPOamIXa0lYrOOMu5Fkj5K05VbSve1k+zrJ9/cgCWgpWdNRvn6b6o1hah+N0vh4nJYnk7R/b0AIsUo4OCclzH6VI/ZSIuxlRC7JiXXXkehuIGm5mdQVFZd97WT5Oshfu4k4oKFkXUf5o0HkT0epf6an8ake5dNJhH2zYkLnigizSTnklFPycIBLRjkn58uJ99RzxtlAiqeZNHcLmf5O0h0qxOtaJA80SFc0SOwdFC90IV8donmzcPf9AkKsYvbMVfHaczsjPz7hRbgMSYeKL51ywmrPE2eo5FhzBjFaMftSIzk7WEZcq4jM6SbCMuKIyDxFmUtL07MJhF2WfPbO5bJ/tIeooT948effOGUvEFUvEO2sJPRqItFjJUQo0vhMcZGoxgy++CaTKPklrgR6SdLKuNBXTsMPU9RujCB8YsrjY1s257o72Ai+ze8WP0G//sa2hbtEThaxpyCGuPvVhOSdJCQ3hjidlNCME0RIzyJ9pOO0WsK57mJqn+u5/nAYYYc5m2BLHrts+ciKU7m1PMHeJ8MccFcRPlVIxJiYk4EGwnW5HNOKSF1t42hXDgkTFYi+6yXLqkRkv0HF4yGqNoYQgkyZfGTOYbcln50OCckzdVTcUVI60kb+tIoUWyOV+g4aTP2IXJ3IzJ10WcfoMo/QZNYhWe2leEOHbE1H5cYgwjZjOh+asgi2iNhtFtHWr+Fn9RL/tvqYHNBzZVzFT2oXv7S4UI32ob89zl/tXv5p8xHonaPQ0/0Ko7V+ytZvIWyd+ZrtxgyCTFlsN2VydrwKxWAnNbfUpEzVEG+spv5ON8o7GnLNKq4ZutHdHaFnbJCWewNkrajJDXQjXtUiW9chbJm+yAfGDEItEqJt1XxuLSPUWsTx+SoSF+pJWWwmwVlHqltJ/KKCWLeCxKUGclY6KfD2UOztRebto8yvQ7rah/CWIZWdphwkji4G/CbUHj15i2pKnVpurOi599CJ1mtg+IGFZEcTMa4azruVaH0G+r0zjK/bXqbaO4HYr0F489553pu+RKhZwuFZGUdnywmflXHYKiPKVkmcvYaEeQVJjiZOOK4Ts1jDaXc9mUvtZHvU5Ho6KFzuQeLTUBC4ifDGtym8bUjlnekLbJm5yPvGdHaYcwi+L+LT2UL2z13hoK2YsPmrRDquEe28TqxLQby7jq88jSQvK0nztpLhU5Pn70Z4fSqJzZXvGtLYOnOZIOMrjHZZROzd/Lm1iEO2kpdGOrJQwXFH1cuVp1x1nFlqImXTSCv/G+lBJ/8BD3AbLPFq42AAAAAASUVORK5CYII=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/83b91a075fc38ba8b17bfcd6a0e410a0/dc47e/JWT-authentication.png 200w,
/static/83b91a075fc38ba8b17bfcd6a0e410a0/9f2d5/JWT-authentication.png 400w,
/static/83b91a075fc38ba8b17bfcd6a0e410a0/4ecb5/JWT-authentication.png 758w" sizes="(max-width: 758px) 100vw, 758px" /><img loading="lazy" sizes="(max-width: 758px) 100vw, 758px" srcset="/static/83b91a075fc38ba8b17bfcd6a0e410a0/dc47e/JWT-authentication.png 200w,
/static/83b91a075fc38ba8b17bfcd6a0e410a0/9f2d5/JWT-authentication.png 400w,
/static/83b91a075fc38ba8b17bfcd6a0e410a0/4ecb5/JWT-authentication.png 758w" src="/static/83b91a075fc38ba8b17bfcd6a0e410a0/4ecb5/JWT-authentication.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><section class="post__StyledPost-sc-14ootra-6 gjEQdA post"><h2 id="dẫn-nhập" style="position:relative;"><a href="#d%E1%BA%ABn-nh%E1%BA%ADp" aria-label="dẫn nhập permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dẫn nhập</h2>
<p>Ngót nghét cũng đã theo nghề code dạo được hơn 4 năm, cũng làm qua nhiều dự án.</p>
<p>Nhưng hầu hết các dự án ở công ty lúc mình join thì đều được dựng sẵn base và platform, hoặc là bê dự án phase 1 ở 1 nơi nào đó về làm tiếp các giai đoạn tiếp theo, do đó mình không có cơ hội chọt vào phần quản lý authentication và token lắm.</p>
<p>Ơ nói thế thì không có nghĩa là mình không làm được, mình có nghiên cứu và áp dụng vào dự án riêng, dự án freelancer, và cả làm boilerplate cho các assignment phỏng vấn nữa 😝</p>
<p>Chưa kể lúc lên công ty thì mình cũng muốn đưa kiến thức research, đọc được lên chém gió cùng đồng nghiệp.</p>
<p>Cái topic liên quan JWT này cũng được mình discuss chém gió đâu đó gần 2 năm trước với 1 người anh, nay đã qua Sing làm việc.</p>
<p>JWT luôn là một phương pháp phổ biến trong việc authenticate user cho các ứng dụng web. Nhưng câu hỏi đặt ra là, chúng ta nên lưu JWT token ở đâu? Ưu nhược điểm của từng nơi lưu như thế nào? Làm cách nào để chúng ta cải thiện nó?</p>
<h2 id="first-thing-first" style="position:relative;"><a href="#first-thing-first" aria-label="first thing first permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>First thing first</h2>
<p>Mình là Kiên, developer với một tay nghề thập cẩm, từ .NET tới Java, Angular, PHP, và gần đây nhất là Golang, cái gì mình cũng chọt vào 1 chút, gần đây thì focus hơn vào backend.</p>
<p>Again, mình là một chú developer thích viết lách, cũng đã khá lâu kể từ bài blog cuối cùng, hôm nay mình sẽ khởi động lại bằng topic “Lưu access token ở đâu thì hợp lý?”</p>
<h2 id="cac-phương-thức-authentication" style="position:relative;"><a href="#cac-ph%C6%B0%C6%A1ng-th%E1%BB%A9c-authentication" aria-label="cac phương thức authentication permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Các phương thức authentication</h2>
<p>Chúng ta đảo qua một chút về các phương thức xác thực trước,</p>
<ol>
<li>
<p>Basic Authentication: Dùng base64 để encrypt tên người dùng và mật khẩu, và đưa nó vào header:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token constant">GET</span> <span class="token operator">/</span>api<span class="token operator">/</span>example <span class="token constant">HTTP</span><span class="token operator">/</span><span class="token number">1.1</span>
Host<span class="token punctuation">:</span> example<span class="token punctuation">.</span>com
Authorization<span class="token punctuation">:</span> Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ<span class="token operator">==</span>
Accept<span class="token punctuation">:</span> application<span class="token operator">/</span>json</code></pre></div>
<p>Phương thức này quá cũ kĩ và không bảo mật, vì bạn có thể dễ dàng decrypt lại chuỗi authorization bên trên.</p>
</li>
<li>
<p>Session &#x26; Cookie: Lưu thông tin session đăng nhập vào cookie của trình duyệt phía client, và lưu session phía memory của server. Nhược điểm chính là không scale được, cũng như không support được mobile app, vì chúng đâu có cookie 😗.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token constant">GET</span> <span class="token operator">/</span>api<span class="token operator">/</span>example <span class="token constant">HTTP</span><span class="token operator">/</span><span class="token number">1.1</span>
Host<span class="token punctuation">:</span> example<span class="token punctuation">.</span>com
Cookie<span class="token punctuation">:</span> session_id<span class="token operator">=</span>abc123def456<span class="token punctuation">;</span> user_id<span class="token operator">=</span><span class="token number">789</span>
Accept<span class="token punctuation">:</span> application<span class="token operator">/</span>json</code></pre></div>
</li>
<li>
<p>Token-based: Sử dụng token để xác thực người dùng. Thông thường, khi người dùng đăng nhập thành công, hệ thống sẽ generate và trả về 1 token, mà phổ biến nhất chính là JWT.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token constant">GET</span> <span class="token operator">/</span>api<span class="token operator">/</span>example <span class="token constant">HTTP</span><span class="token operator">/</span><span class="token number">1.1</span>
Host<span class="token punctuation">:</span> example<span class="token punctuation">.</span>com
Authorization<span class="token punctuation">:</span> Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9<span class="token punctuation">.</span>eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRmF
    sZSIsImlhdCI6MTUxNjIzOTAyMn0<span class="token punctuation">.</span>SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
Accept<span class="token punctuation">:</span> application<span class="token operator">/</span>json</code></pre></div>
</li>
</ol>
<p>Với phương thức session &#x26; cookie, thì dĩ nhiên trình duyệt auto nhận authentication data và lưu vào cookie rồi, vậy còn JWT chúng ta lưu ở đâu?</p>
<h2 id="jwt-authentication" style="position:relative;"><a href="#jwt-authentication" aria-label="jwt authentication permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JWT Authentication</h2>
<p>JWT (JSON Web Token) như tên gọi, là token được lưu dưới dạng text, có thể parse qua JSON và chứa những thông tin liên quan để authenticate.</p>
<h3 id="mổ-xẻ-jwt" style="position:relative;"><a href="#m%E1%BB%95-x%E1%BA%BB-jwt" aria-label="mổ xẻ jwt permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mổ xẻ JWT</h3>
<p>JWT gồm 3 phần: Header, Payload và Signature.</p>
<ul>
<li>Header: Chứa thông tin về loại token và thuật toán mã hóa được sử dụng.</li>
<li>Payload: Chứa các thông tin liên quan đến user (ví dụ như id, tên, email, quyền hạn, thời gian hết hạn token, etc.).</li>
<li>Signature: Là một chuỗi được mã hóa bằng thuật toán chữ ký số (signature algorithm) và được tạo ra bằng cách kết hợp header, payload và secret key (khóa bí mật) mà chỉ server biết.</li>
</ul>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/5aea77eb7dcf258a3dbf86fbafeb1cd0/951a4/jwt-content-payload-decoded.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 36.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVQoz3WR7W7DIAxF+/4vuSk/VuVzahsI2NhngmxVVyWgiwVG9j1w6fuer/6KFEWt4PBfXleYpomu64ghoqqISMu962IhYcMDXyI2Bnxa8XnFxwc+R0ycOrcYiVski5BzxswOdclLYf1QQqeEz9Ji3adOma9K3H69msGa4B6rbY5GcxiyM0bne3OWqrTHW3KG7CTbC+aUkLDhUg5Rq5pDf3bzA+3n9U7FzCoN39zOkffqnHZ95grYHWSAcnvx8I7859AP3uW1oBVrH2TJMT1H/gEXrSdajzAFhAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="JWT Payload"
        title="JWT Payload"
        src="/static/5aea77eb7dcf258a3dbf86fbafeb1cd0/c1b63/jwt-content-payload-decoded.png"
        srcset="/static/5aea77eb7dcf258a3dbf86fbafeb1cd0/5a46d/jwt-content-payload-decoded.png 300w,
/static/5aea77eb7dcf258a3dbf86fbafeb1cd0/0a47e/jwt-content-payload-decoded.png 600w,
/static/5aea77eb7dcf258a3dbf86fbafeb1cd0/c1b63/jwt-content-payload-decoded.png 1200w,
/static/5aea77eb7dcf258a3dbf86fbafeb1cd0/951a4/jwt-content-payload-decoded.png 1355w"
        sizes="(max-width: 1200px) 100vw, 1200px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>Chúng ta có thể gán thêm information cần thiết vào phần payload bên cạnh những “Claim” cơ bản được định nghĩa trong <a href="https://www.rfc-editor.org/rfc/rfc7519">RFC 7519</a>.</p>
<h3 id="muốn-giấu-thong-tin-khỏi-jwt-thi-lam-sao" style="position:relative;"><a href="#mu%E1%BB%91n-gi%E1%BA%A5u-thong-tin-kh%E1%BB%8Fi-jwt-thi-lam-sao" aria-label="muốn giấu thong tin khỏi jwt thi lam sao permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Muốn giấu thông tin khỏi JWT thì làm sao?</h3>
<p>Bạn có thể sẽ thắc mắc là một vài thông tin như username, email có thể bị lộ từ việc decode JWT. Vì nó chỉ được Encode chứ không được Encrypt.</p>
<p>Để giấu thông tin khỏi JWT, bạn có thể mã hóa thông tin trước khi đưa vào JWT. Tuy nhiên, JWT thường được sử dụng để xác thực người dùng và không được mã hóa. Thay vào đó, nó được “sign” (ký) để đảm bảo tính toàn vẹn của dữ liệu. (Tham khảo bài viết về <a href="https://devgiangho.github.io/https-la-gi-giai-thich-chi-tiet-ssl-tls-bang-chuyen-tinh-cho-va-meo">HTTP và HTTPS</a> để tìm hiểu thêm về chữ ký nhé).</p>
<p>Bạn cũng có thể tham khảo thêm chi tiết tại <a href="https://www.rfc-editor.org/rfc/rfc7516">RFC-7516</a> về việc mã hóa các trường trong JWT. Tuy nhiên, hãy nhớ rằng việc mã hóa trong JWT có thể làm tăng độ phức tạp và làm chậm việc xác thực người dùng.</p>
<p>Tham khảo về encrypt - decrypt cho ai quan tâm: <a href="https://advancedweb.hu/how-to-sign-verify-and-encrypt-jwts-in-node/">https://advancedweb.hu/how-to-sign-verify-and-encrypt-jwts-in-node/</a></p>
<h2 id="vậy-bay-giờ-lưu-access-token-ở-dau" style="position:relative;"><a href="#v%E1%BA%ADy-bay-gi%E1%BB%9D-l%C6%B0u-access-token-%E1%BB%9F-dau" aria-label="vậy bay giờ lưu access token ở dau permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Vậy bây giờ lưu access token ở đâu?</h2>
<p>Chúng ta có thể bỏ qua luôn session storage và cả application state, vì chúng quá mỏng manh yếu đuối, đóng tab hoặc ctrl + F5 cái là đi mất rồi.</p>
<h3 id="local-storage" style="position:relative;"><a href="#local-storage" aria-label="local storage permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Local Storage</h3>
<p>Đây chính là 1 nơi nguy hiểm, bởi vì local storage có thể được truy cập từ bất kỳ script nào chạy trên cùng 1 domain (và session storage cũng thế nha).</p>
<p>Chúng ta gọi đó là lỗ hổng XSS, tức <strong><em>Cross-Site Scripting,</em></strong> kẻ xấu chỉ cần inject script vào target là đã có thể lấy được token.</p>
<p>Điểm chí mạng thứ 2 đó chính là local storage không có thời gian expire, nó sẽ còn sống mãi. Bình thường con người sống lâu thì mừng, còn token sống lâu thì lại là vấn đề 🃏</p>
<h3 id="cookie" style="position:relative;"><a href="#cookie" aria-label="cookie permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cookie</h3>
<p>Một cách khác chính là lưu vào cookie, mặc dù cookie vẫn có thể truy cập từ script trong cùng domain bằng cách gọi <code class="language-text">document.cookie</code> .</p>
<p>Nhưng nó vẫn an toàn hơn localstorage, tại sao?</p>
<p>Thứ nhất, cookie có thời gian expiration, không sống thọ như local storage.</p>
<p>Thứ 2, cookie có 1 flag gọi là <code class="language-text">httpOnly</code>. Flag này sẽ giúp ngăn chặn cookie truy cập bởi client side.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 668px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/a50f2826177d2a301edd1bc4224b5ee7/74866/httponly-flag-in-cookie.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiElEQVQoz02R2W7rMBBD/f8/eHGbeF/ifZNjSXYBFqSTNg/CWPKI5BkFznsU1QNFVWOYZlR1g6wodZYVFdK8RF5WyMsH2n7AYjbMq8G0mqsuq+r7O+Dluu2xmg3lo8Y9ThDGKb7uEcpHo0ae04CCtzCWIY3jNMc4zTK9xymarkewrAbOHzi/v9H1A8I4UTKmSrIcUZyCPfOyoh9G7NbCbE9Y51Sdc4jTTHSkDZjMOi/RpuuULi1KiWV5ia8wEso4z0rAS9tzx+7cVa2V4DSvsBRcjJGgPw7UbSskotzCCFGSak93Gnf9qGSX0KvuVn3jvEgnUGx/4DhOtH2PKMl+cdO80OIc2Te+sJ77rsubqlMvKbw//hJ+IvMnBdZt0/yeu70SDqP6KEJUJuQ/pqURzzRDbvxxomk73KMYYZLKlQ/07/9NOEw1jJNG45z/QLd65Yv0E/k89cocMJGL8nppijIxBYV1nL8pmY5VY1mMzIL3gOnEtERU1TLa05TzYn1aq/XGfRuZ1/4HGoT2Q41l3gMAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="HttpOnly flag in cookie settings"
        title="HttpOnly flag in cookie settings"
        src="/static/a50f2826177d2a301edd1bc4224b5ee7/74866/httponly-flag-in-cookie.png"
        srcset="/static/a50f2826177d2a301edd1bc4224b5ee7/5a46d/httponly-flag-in-cookie.png 300w,
/static/a50f2826177d2a301edd1bc4224b5ee7/0a47e/httponly-flag-in-cookie.png 600w,
/static/a50f2826177d2a301edd1bc4224b5ee7/74866/httponly-flag-in-cookie.png 668w"
        sizes="(max-width: 668px) 100vw, 668px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>HttpOnly flag in cookie settings</p>
<p>Lúc này khi các bạn truy cập <code class="language-text">document.cookie</code> nó chỉ trả về empty mà thôi.</p>
<p><strong>Khoan!</strong></p>
<p>Nếu bật HttpOnly thì cookie cũng sẽ bị dính chưởng lời nguyền CSRF (<strong>Cross-Site Request Forgery</strong>)</p>
<p>Để thoát khỏi CSRF, chúng ta cần thêm 2 flag nữa, chính là <code class="language-text">SameSite=Strict</code> , flag này chỉ cho phép gửi cookie đi trên cùng 1 domain đã set mà thôi.</p>
<p>Mà để bật SameSite strict, thì chúng ta cũng phải bật luôn flag <strong><code class="language-text">Secure</code></strong>, flag này chỉ cho phép gửi cookie đi qua kết nối HTTPS. Xem thêm tại <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite">MDN - Samesite cookie flag</a></p>
<p>Nhược điểm của việc đặt same-site chính là không bật được tính năng cross-site như social login các thứ cần kết nối tới 1 service 3rd party.</p>
<p>Tất cả biện pháp trên cũng không đảm bảo 100% tránh được CSRF, cho nên chúng ta vẫn cần implement 1 cơ chế nào đó để tránh CSRF phía server.</p>
<p>Bởi vì sẽ có 1 trường hợp bạn đã đăng nhập <code class="language-text">domainA.com</code>, sau đó bạn vào <code class="language-text">domainA-giamao.com</code>, và <code class="language-text">domainA-giamao.com</code> sẽ có script gửi 1 request change password tới <code class="language-text">domainA.com</code>, lúc đó browser vẫn chấp nhận gửi cookie tới <code class="language-text">domainA</code>.</p>
<h3 id="tổng-kết-lại-1-chut-nao" style="position:relative;"><a href="#t%E1%BB%95ng-k%E1%BA%BFt-l%E1%BA%A1i-1-chut-nao" aria-label="tổng kết lại 1 chut nao permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tổng kết lại 1 chút nào</h3>
<table>
<thead>
<tr>
<th></th>
<th>LocalStorage</th>
<th>Cookies</th>
</tr>
</thead>
<tbody>
<tr>
<td>XSS</td>
<td>Có</td>
<td>Nếu set flag HttpOnly thì tránh được XSS.</td>
</tr>
<tr>
<td>Expiration</td>
<td>Không</td>
<td>Có</td>
</tr>
<tr>
<td>CSRF</td>
<td>Không</td>
<td>Bị dính CSRF, mặc dù nếu set <code class="language-text">SameSite=Strict</code> thì sẽ đỡ nguy cơ nhưng vẫn phải implement cơ chế chống CSRF phía server.</td>
</tr>
</tbody>
</table>
<p>Túm cái váy lại thì cách an toàn nhất để lưu token vẫn là đưa vào cookie và set một vài flag, tuy nhiên tùy vào nghiệp vụ dự án thì chúng ta có thể chọn phương án localstorage.</p>
<h2 id="implement-với-cookie" style="position:relative;"><a href="#implement-v%E1%BB%9Bi-cookie" aria-label="implement với cookie permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implement với Cookie</h2>
<h3 id="cach-set-httponly-phia-server" style="position:relative;"><a href="#cach-set-httponly-phia-server" aria-label="cach set httponly phia server permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cách set HttpOnly phía server</h3>
<p>Tất nhiên rồi, khi bạn bật mode HttpOnly, thì client sẽ không có quyền truy cập vào cookie, do đó chúng ta phải thực hiện việc set cookie thông qua backend.</p>
<p>Với nodejs, chuyện này khá dễ:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> token <span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>payload<span class="token punctuation">,</span> <span class="token constant">SECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">"accessToken"</span><span class="token punctuation">,</span> token<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    maxAge<span class="token punctuation">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 1 hour</span>
    httpOnly<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    secure<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    sameSite<span class="token punctuation">:</span> <span class="token string">"strict"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"Cookie set!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Tương tự cho Go với Gin:</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go">r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Middleware to set the access token cookie</span>
r<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	accessToken <span class="token operator">:=</span> http<span class="token punctuation">.</span>Cookie<span class="token punctuation">{</span>
		Name<span class="token punctuation">:</span>     <span class="token string">"accessToken"</span><span class="token punctuation">,</span>
		Value<span class="token punctuation">:</span>    <span class="token string">"myAccessToken"</span><span class="token punctuation">,</span>
		HttpOnly<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		Secure<span class="token punctuation">:</span>   <span class="token boolean">true</span><span class="token punctuation">,</span>
		SameSite<span class="token punctuation">:</span> http<span class="token punctuation">.</span>SameSiteStrictMode<span class="token punctuation">,</span>
		MaxAge<span class="token punctuation">:</span>   <span class="token number">3600</span><span class="token punctuation">,</span> <span class="token comment">// 1 hour</span>
	<span class="token punctuation">}</span>
	http<span class="token punctuation">.</span><span class="token function">SetCookie</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>Writer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>accessToken<span class="token punctuation">)</span>
	c<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<h3 id="client-gửi-token-di-thế-nao" style="position:relative;"><a href="#client-g%E1%BB%ADi-token-di-th%E1%BA%BF-nao" aria-label="client gửi token di thế nao permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Client gửi token đi thế nào?</h3>
<p>Bạn có thể tự hỏi, làm sao client có thể lấy được token, trong khi cookie đã không còn xuất hiện trong con mắt của client script nữa?</p>
<p>Đáp án là header này, hãy thêm nó vào middleware gửi request phía client.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Credentials<span class="token punctuation">:</span> <span class="token boolean">true</span></code></pre></div>
<p>Khi header này được set true, trình duyệt sẽ tự động gửi bất kỳ cookie nào có thuộc tính HttpOnly mà có domain là domain đang gửi request tới. (Tham khảo tại <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials">MDN</a>)</p>
<p>Với axios, chúng ta có thể enable bằng cách set <strong><code class="language-text">withCredentials: true</code></strong>:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"https://api.domainA.com"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> withCredentials<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Nhưng ở đây lại đẻ ra 1 của nợ nữa, đó chính là CORS, ví dụ bạn đăng nhập và lưu cookie ở <code class="language-text">auth.domainA.com</code>, nhưng lại cần gửi request tới <code class="language-text">api.domainA.com</code> thì dễ bị chặn lắm.</p>
<p>Thì chúng ta tiếp tục phải enable CORS phía server.</p>
<h3 id="enable-cors" style="position:relative;"><a href="#enable-cors" aria-label="enable cors permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enable CORS</h3>
<p>CORS - Cross-Origin Resource Sharing, là một tính năng bảo mật của trình duyệt giúp ngăn chặn hoặc giới hạn những resource được cho phép theo origin (field này trình duyệt tự thêm vô).</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 636px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/4d0d53481333044a6ae30be21fd558ba/9be90/request-header-origin.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABDUlEQVQoz42Ri2rDMAxF8/+fWErzcN62Yztp19R5nBF1HYw9mEBIGHx1dJVM05XT6UyapuR5TpYXrOvK19hh34CNfd/Ytt8zecSVx62ma2vOl4xLmlGokrKq6bUhLxS9DegJGr9yj/tzxM6PkRw018mT5bl8Vqqkqhu0sVg70PWaptOo1lL1DusCzvsP0f1biqD3QYiqqqZtO8Zxou06VFWjjcHYQ9xirJFBMS5/CW4MzqHKijBO+DDKAK2NiIUwisj1duM/IYTGGIpCcZ9nOciyrlJf/cvwGCPLssjb0R+kzxqJy8I8P0je3u6fKzZNK+s554XsyIN4FPKAsYP4NwyOpu3kaLJROHwN4vc78lwbbtSlWtUAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Trình duyệt sẽ tự động thêm field origin vào"
        title="Trình duyệt sẽ tự động thêm field origin vào"
        src="/static/4d0d53481333044a6ae30be21fd558ba/9be90/request-header-origin.png"
        srcset="/static/4d0d53481333044a6ae30be21fd558ba/5a46d/request-header-origin.png 300w,
/static/4d0d53481333044a6ae30be21fd558ba/0a47e/request-header-origin.png 600w,
/static/4d0d53481333044a6ae30be21fd558ba/9be90/request-header-origin.png 636w"
        sizes="(max-width: 636px) 100vw, 636px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>Trình duyệt sẽ tự động thêm field origin vào</p>
<p>Flow nôm na là nếu server đánh dấu origin là được phép (thông qua header), thì trình duyệt sẽ gửi request đi, còn nếu server không cho, thì browser sẽ chặn request lại.</p>
<p>Do đó mà dev có thể bypass bằng 1 extension của trình duyệt 😜, tuy nhiên ai lại bắt user đi cài extension bao giờ, do đó ta phải implement nó.</p>
<p>Nodejs:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"cors"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    origin<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"https://auth.domainA.com"</span><span class="token punctuation">,</span> <span class="token string">"https://api.domainA.com/"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Như code trên chúng ta sẽ allow 2 origin được gửi request tới chính là domainA và domainB.</p>
<p>Không khuyến khích dùng pattern <code class="language-text">origin: *</code></p>
<p>Với Go Gin, thì có thể tham khảo <a href="https://github.com/gin-contrib/cors">lib này</a> nhé</p>
<h3 id="chống-csrf" style="position:relative;"><a href="#ch%E1%BB%91ng-csrf" aria-label="chống csrf permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Chống CSRF</h3>
<p>Kĩ thuật này khá đơn giản, với mỗi form request, chúng ta generate 1 csrf token dựa vào session hiện tại, client gán nó vào 1 hidden input, và server sẽ xử lý field này bằng 1 thuật toán nào đó, nếu hợp lệ thì cho qua.</p>
<p>Ví dụ code ở client:</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/submit-form<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>_csrf<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{ csrfToken }}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Username:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Password:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Submit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre></div>
<p>Hầu hết các framework đều support CSRF rồi, xưa mình code laravel PHP thì nó support middleware có sẵn dễ như ăn bánh.</p>
<p>Với Go, tham khảo thư viện <a href="https://github.com/utrack/gin-csrf">gin-crsf</a> để thêm 1 middleware:</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go">r<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span>csrf<span class="token punctuation">.</span><span class="token function">Middleware</span><span class="token punctuation">(</span>csrf<span class="token punctuation">.</span>Options<span class="token punctuation">{</span>
		Secret<span class="token punctuation">:</span> <span class="token string">"kiendeptrai"</span><span class="token punctuation">,</span>
		ErrorFunc<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			c<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">"CSRF token mismatch"</span><span class="token punctuation">)</span>
			c<span class="token punctuation">.</span><span class="token function">Abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<h2 id="tổng-kết" style="position:relative;"><a href="#t%E1%BB%95ng-k%E1%BA%BFt" aria-label="tổng kết permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tổng kết</h2>
<p>Hoooo, mình không nghĩ là bài này lại dài tới vậy, cứ nghĩ là viết trong 1 buổi tối, mà phải tới trưa ngày hôm sau mới xong.</p>
<p>Hi vọng sau bài này bạn sẽ có 1 cái nhìn tổng quan về JWT authenticaion và những vấn đề bên cạnh như CORS và bảo mật các request với CSRF.</p>
<p>Happy coding!</p>
<p>Tham khảo thêm:</p>
<p><a href="https://ironeko.com/posts/how-to-store-access-tokens-localstorage-cookies-or-httponly">https://ironeko.com/posts/how-to-store-access-tokens-localstorage-cookies-or-httponly</a></p>
<p><a href="https://owasp.org/www-community/attacks/csrf">https://owasp.org/www-community/attacks/csrf</a></p></section><footer class="post__PostFooter-sc-14ootra-9 kvgTmP"><p>Published under <span><a class="post__FooterTagLink-sc-14ootra-10 gdsQai" href="/tag/web">Web</a>, </span><span><a class="post__FooterTagLink-sc-14ootra-10 gdsQai" href="/tag/go">Go</a></span> on<!-- --> <time dateTime="2023-03-18T05:04:51.904Z">18 March, 2023</time>.</p></footer></article></div></div><section class="post__PostAddition-sc-14ootra-11 ddTKRo"><div class="common__Container-sc-yvdkhc-0 post__PostAdditionContent-sc-14ootra-12 hhzXsP jxyEbH"><div class="post__BioWrapper-sc-14ootra-13 dMBYdG"><section class="bio__StyledBio-sc-cy4lz8-0 buiIfq"><div class="avatar__StyledAvatar-sc-1b55w7o-0 fYracG gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:55px;height:55px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEz0lEQVQ4ywHEBDv7ANXT1Lq4ucG/wMzKzNHP0dPR0tTS09nX2N3b3N7c3eLg4OPh4vLw8HJxd0BDSVxfY6Glo5KYlpGVlJaamQDPzc6+vL3Fw8TS0NHZ19jb2dre3Nzi4ODl4uTn5ebg3t/NzM7m5eZhYGdBRElbXmKQl5SNlJKWm5qTl5YAyMbHurm5w8HCzcvMwcDCy8rLz87O1dTU2tjY09LTe32BS0tSYWBnMzI6MDI4YmZok5iXkJSUmJybkZaUAMG/wLKysr6+vsXDxKCiori3uLa1t7y7vby9vLa4t1JVWgsLFAsKEg4OFg0NFT0/RY6Tk5yfnqGiopygnwC0srOkpqStr666urq1trXAv7/AwMDCwsLEw8PKycmpqqtGSlATFBwSExkQEBYLDBJdYWSkqKago6KfoqEAyMfHqqurubi4vr2+vLy8t7i4u7u7urq6rKytx8XGpqmnc31+JSgvDAwSERIXBwgONzo9oKWjqampsrKxANPS0rq5ucbFxcbExcTCwsG/v8XDxMTCwqysrqytr32Cg1NdYC4xORAQGBESFwgIDi8yNpSZmKepp4SIiAC6urupqqqxsrG3t7a1tbO9vLzBvsDTz9CXm5ygoaNlamw9RUgmKTEREhoQERYDBAlDR0qVnJqVmplrbnEAZmxuXmVoV15hcXd6hIeJhIiKf4KDmpudh4yNlpqZeH+AQUhNIygwKCsyEhMYJCcrbnR1iI+MjZORlJiXAH2EhXmBgWdwcamurre4uJudnZaZmampqoSKi3aAgF1maENKUEtSV1ddYCQkLH+EhYqQj5OYlYSKinyDgwCCi4l4gYCKkJDT0dKqrKueoKGhoqO0trWHjY1SW15ES1E9REs4PkRFSU0zNT6gpaSbn56eoJ+PlJOEi4kAhYuLfoWFt7q50s/QrKyteX+AeH1+jpKTZ2tvXWVoQEdNNDpBNDlAZWltSUxSnKCfo6WkqaqppaemnqGgAKipqYOGh6uqrtHP0KWmpYOIiIaLioqPkF5jZkVMUURKUSAjLVBVV3d/gHyBgZ+ioaurq6urq62traGjowB/gIQGCROcnaDKycqMkJF8gIOTmJeDh4ZscXI6QUkwNj9ESE6cnZ2BhYd2fX6YnZu3trevr6+xsbG2trYAIiUtGhsju7q929jZnJ6eam5xhIeHpqimhouKXGFkYmZsf4KFh4qLfoaGXGRnbXF1m56dlJeXpKSmr6+vAAYHEklJT87Mzr+9vZ+ioGxydGFlaZKWloKGhoCEhJOXl3V8fXaAgHd/f1piZiMoMSUqMSswODU6Qjk+RQAGBhB2dXzi4OCsrKyCiopSXF9ka25xd3lscHVxd3hwdnZpcHFtd3deZmlNVFoxNT4sLzkrMDgsMDkrMToAEREYi4qN3Nraq6ysfYSER05UR0xTYGhrY2ttWmFkU1pdUVpcNjtCMDc9MTU8LTE7MTU+NDlCNjtEO0FJADY2PKKjpLW1trm6uX+FhTg+RSwxOz1ES0RLUEpSV0ZOUzQ5QD1ASIWHind5fVFUWjI3PzI3QEROUjtDSABlZWnR0NGNkJKxsbKvsLCNkZBna245PkQ1OUI3PEMjJi8dHSRxcnbT0tPb2drRz9DMy83Hxce7vLyTl5hH1mZLeDDpeAAAAABJRU5ErkJggg==" alt="Kiên Đinh" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/7e55704418c2d530fda33cc8a39a3395/eaa90/logo.png 1x,
/static/7e55704418c2d530fda33cc8a39a3395/4747d/logo.png 1.5x,
/static/7e55704418c2d530fda33cc8a39a3395/3b7ca/logo.png 2x" /><img loading="lazy" width="55" height="55" srcset="/static/7e55704418c2d530fda33cc8a39a3395/eaa90/logo.png 1x,
/static/7e55704418c2d530fda33cc8a39a3395/4747d/logo.png 1.5x,
/static/7e55704418c2d530fda33cc8a39a3395/3b7ca/logo.png 2x" src="/static/7e55704418c2d530fda33cc8a39a3395/eaa90/logo.png" alt="Kiên Đinh" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><h3 class="bio__AuthorName-sc-cy4lz8-2 HeSmV">Kiên Đinh</h3><p class="bio__AuthorDescription-sc-cy4lz8-1 iEPaOA">Bần đạo là <strong>Kiên Đinh</strong>, một Developer. 
        Ta viết blog này với mục đích chia sẻ những kinh nghiệm của bản thân đối với <b>coding chi đạo</b>. </p><ul class="social-channel-list__StyledSocialChannels-sc-hb4cd6-0 eWZpEr"><li class="social-channel-list__StyledSocialChannel-sc-hb4cd6-1 dIYGZM"><a href="https://www.facebook.com/kien.matu.7" target="_blank" rel="noopener" aria-label="facebook"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="#4267b2" style="color:#4267b2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></a></li><li class="social-channel-list__StyledSocialChannel-sc-hb4cd6-1 dIYGZM"><a href="https://www.linkedin.com/in/kiendinh-dev/" target="_blank" rel="noopener" aria-label="linkedin"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" color="#0077b5" style="color:#0077b5" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li class="social-channel-list__StyledSocialChannel-sc-hb4cd6-1 dIYGZM"><a href="https://www.youtube.com/channel/UCnq0iZ1X0udszc7ODV9uK4g" target="_blank" rel="noopener" aria-label="youtube"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" color="#ff0000" style="color:#ff0000" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></li><li class="social-channel-list__StyledSocialChannel-sc-hb4cd6-1 dIYGZM"><a href="https://github.com/kienmatu" target="_blank" rel="noopener" aria-label="github"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li></ul></section></div></div></section></main><footer class="style__StyledFooter-sc-1bbyksd-0 hNmZFn"><div class="common__Container-sc-yvdkhc-0 style__FooterContainer-sc-1bbyksd-1 hhzXsP kRFmqs"><nav class="style__StyledNav-sc-1bbyksd-4 hCiwIZ"><ul><li><a class="style__FooterMenuLink-sc-1bbyksd-6 RdnGO" href="/about-me">About me</a></li></ul></nav><div><p class="style__Copyright-sc-1bbyksd-2 eFaQjI"><strong>Dev Giang Hồ - Blog for Devs</strong> © <!-- -->2023</p><p class="style__DesignBy-sc-1bbyksd-3 hFClol"><a href="https://devgiangho.github.io" title="devgiangho">devgiangho</a><br/>Icons made by <a href="https://www.flaticon.com/authors/dinosoftlabs" title="DinosoftLabs">DinosoftLabs</a> from <a href="https://www.flaticon.com/" title="Flaticon">Flaticon</a></p></div></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/authentication-voi-jwt-luu-token-o-dau-la-bao-mat-nhat";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-b7c3d2ab5981229e622a.js"],"app":["/app-1b32501acd7206214859.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-ba25389efecac5928a3f.js"],"component---src-pages-archive-tsx":["/component---src-pages-archive-tsx-53c36f17170152417041.js"],"component---src-pages-tags-tsx":["/component---src-pages-tags-tsx-aafcc5c975f102fca591.js"],"component---src-templates-page-tsx":["/component---src-templates-page-tsx-9d8640ca6643bd7d7af2.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-0046fe43ee7790d25f58.js"],"component---src-templates-posts-tsx":["/component---src-templates-posts-tsx-0916fb4ebe89d60b4d9a.js"],"component---src-templates-tag-tsx":["/component---src-templates-tag-tsx-1627200430af68113eb3.js"]};/*]]>*/</script><script src="/polyfill-b7c3d2ab5981229e622a.js" nomodule=""></script><script src="/component---src-templates-post-tsx-0046fe43ee7790d25f58.js" async=""></script><script src="/commons-9754e5915e5f58c0d66e.js" async=""></script><script src="/1bfc9850-f1b2044ff811313c5a48.js" async=""></script><script src="/app-1b32501acd7206214859.js" async=""></script><script src="/framework-38de9ebdaf5cd0003079.js" async=""></script><script src="/webpack-runtime-8e5d3fd77330e7347cae.js" async=""></script></body></html>